"use strict";
const assert_1 = require("@aws-cdk/assert");
const iam = require("@aws-cdk/aws-iam");
const cdk_1 = require("@aws-cdk/cdk");
const lib_1 = require("../lib");
// tslint:disable:object-literal-key-quotes
// CDK parameters
const STACK_NAME = 'MyStack';
const CONSTRUCT_NAME = 'MyTable';
// DynamoDB table parameters
const TABLE_NAME = 'MyTable';
const TABLE_PARTITION_KEY = { name: 'hashKey', type: lib_1.AttributeType.String };
const TABLE_SORT_KEY = { name: 'sortKey', type: lib_1.AttributeType.Number };
// DynamoDB global secondary index parameters
const GSI_NAME = 'MyGSI';
const GSI_PARTITION_KEY = { name: 'gsiHashKey', type: lib_1.AttributeType.String };
const GSI_SORT_KEY = { name: 'gsiSortKey', type: lib_1.AttributeType.Binary };
const GSI_NON_KEY = 'gsiNonKey';
function* GSI_GENERATOR() {
    let n = 0;
    while (true) {
        const globalSecondaryIndexProps = {
            indexName: `${GSI_NAME}${n}`,
            partitionKey: { name: `${GSI_PARTITION_KEY.name}${n}`, type: GSI_PARTITION_KEY.type }
        };
        yield globalSecondaryIndexProps;
        n++;
    }
}
function* NON_KEY_ATTRIBUTE_GENERATOR(nonKeyPrefix) {
    let n = 0;
    while (true) {
        yield `${nonKeyPrefix}${n}`;
        n++;
    }
}
// DynamoDB local secondary index parameters
const LSI_NAME = 'MyLSI';
const LSI_SORT_KEY = { name: 'lsiSortKey', type: lib_1.AttributeType.Number };
const LSI_NON_KEY = 'lsiNonKey';
function* LSI_GENERATOR() {
    let n = 0;
    while (true) {
        const localSecondaryIndexProps = {
            indexName: `${LSI_NAME}${n}`,
            sortKey: { name: `${LSI_SORT_KEY.name}${n}`, type: LSI_SORT_KEY.type }
        };
        yield localSecondaryIndexProps;
        n++;
    }
}
class TestApp {
    constructor() {
        this.app = new cdk_1.App();
        // tslint:disable-next-line:member-ordering
        this.stack = new cdk_1.Stack(this.app, STACK_NAME);
    }
    synthesizeTemplate() {
        return this.app.synthesizeStack(this.stack.name).template;
    }
}
function testGrant(test, expectedActions, invocation) {
    // GIVEN
    const stack = new cdk_1.Stack();
    const table = new lib_1.Table(stack, 'my-table');
    table.addPartitionKey({ name: 'ID', type: lib_1.AttributeType.String });
    const user = new iam.User(stack, 'user');
    // WHEN
    invocation(user, table);
    // THEN
    const action = expectedActions.length > 1 ? expectedActions.map(a => `dynamodb:${a}`) : `dynamodb:${expectedActions[0]}`;
    assert_1.expect(stack).to(assert_1.haveResource('AWS::IAM::Policy', {
        "PolicyDocument": {
            "Statement": [
                {
                    "Action": action,
                    "Effect": "Allow",
                    "Resource": {
                        "Fn::GetAtt": [
                            "mytable0324D45C",
                            "Arn"
                        ]
                    }
                }
            ],
            "Version": "2012-10-17"
        },
        "Users": [{ "Ref": "user2C2B57AE" }]
    }));
    test.done();
}
module.exports = {
    'default properties': {
        'fails without a hash key'(test) {
            const app = new TestApp();
            new lib_1.Table(app.stack, CONSTRUCT_NAME);
            test.throws(() => app.synthesizeTemplate(), /partition key/);
            test.done();
        },
        'hash key only'(test) {
            const app = new TestApp();
            new lib_1.Table(app.stack, CONSTRUCT_NAME).addPartitionKey(TABLE_PARTITION_KEY);
            const template = app.synthesizeTemplate();
            test.deepEqual(template, {
                Resources: {
                    MyTable794EDED1: {
                        Type: 'AWS::DynamoDB::Table',
                        Properties: {
                            AttributeDefinitions: [{ AttributeName: 'hashKey', AttributeType: 'S' }],
                            KeySchema: [{ AttributeName: 'hashKey', KeyType: 'HASH' }],
                            ProvisionedThroughput: { ReadCapacityUnits: 5, WriteCapacityUnits: 5 }
                        }
                    }
                }
            });
            test.done();
        },
        'hash + range key'(test) {
            const app = new TestApp();
            new lib_1.Table(app.stack, CONSTRUCT_NAME)
                .addPartitionKey(TABLE_PARTITION_KEY)
                .addSortKey(TABLE_SORT_KEY);
            const template = app.synthesizeTemplate();
            test.deepEqual(template, {
                Resources: {
                    MyTable794EDED1: {
                        Type: 'AWS::DynamoDB::Table',
                        Properties: {
                            AttributeDefinitions: [
                                { AttributeName: 'hashKey', AttributeType: 'S' },
                                { AttributeName: 'sortKey', AttributeType: 'N' }
                            ],
                            KeySchema: [
                                { AttributeName: 'hashKey', KeyType: 'HASH' },
                                { AttributeName: 'sortKey', KeyType: 'RANGE' }
                            ],
                            ProvisionedThroughput: { ReadCapacityUnits: 5, WriteCapacityUnits: 5 },
                        }
                    }
                }
            });
            test.done();
        },
        'hash + range key can also be specified in props'(test) {
            const app = new TestApp();
            new lib_1.Table(app.stack, CONSTRUCT_NAME, {
                partitionKey: TABLE_PARTITION_KEY,
                sortKey: TABLE_SORT_KEY
            });
            const template = app.synthesizeTemplate();
            test.deepEqual(template, {
                Resources: {
                    MyTable794EDED1: {
                        Type: 'AWS::DynamoDB::Table',
                        Properties: {
                            AttributeDefinitions: [
                                { AttributeName: 'hashKey', AttributeType: 'S' },
                                { AttributeName: 'sortKey', AttributeType: 'N' }
                            ],
                            KeySchema: [
                                { AttributeName: 'hashKey', KeyType: 'HASH' },
                                { AttributeName: 'sortKey', KeyType: 'RANGE' }
                            ],
                            ProvisionedThroughput: { ReadCapacityUnits: 5, WriteCapacityUnits: 5 },
                        }
                    }
                }
            });
            test.done();
        },
        'point-in-time recovery is not enabled'(test) {
            const app = new TestApp();
            new lib_1.Table(app.stack, CONSTRUCT_NAME)
                .addPartitionKey(TABLE_PARTITION_KEY)
                .addSortKey(TABLE_SORT_KEY);
            const template = app.synthesizeTemplate();
            test.deepEqual(template, {
                Resources: {
                    MyTable794EDED1: {
                        Type: 'AWS::DynamoDB::Table',
                        Properties: {
                            AttributeDefinitions: [
                                { AttributeName: 'hashKey', AttributeType: 'S' },
                                { AttributeName: 'sortKey', AttributeType: 'N' }
                            ],
                            KeySchema: [
                                { AttributeName: 'hashKey', KeyType: 'HASH' },
                                { AttributeName: 'sortKey', KeyType: 'RANGE' }
                            ],
                            ProvisionedThroughput: { ReadCapacityUnits: 5, WriteCapacityUnits: 5 }
                        }
                    }
                }
            });
            test.done();
        },
        'server-side encryption is not enabled'(test) {
            const app = new TestApp();
            new lib_1.Table(app.stack, CONSTRUCT_NAME)
                .addPartitionKey(TABLE_PARTITION_KEY)
                .addSortKey(TABLE_SORT_KEY);
            const template = app.synthesizeTemplate();
            test.deepEqual(template, {
                Resources: {
                    MyTable794EDED1: {
                        Type: 'AWS::DynamoDB::Table',
                        Properties: {
                            AttributeDefinitions: [
                                { AttributeName: 'hashKey', AttributeType: 'S' },
                                { AttributeName: 'sortKey', AttributeType: 'N' }
                            ],
                            KeySchema: [
                                { AttributeName: 'hashKey', KeyType: 'HASH' },
                                { AttributeName: 'sortKey', KeyType: 'RANGE' }
                            ],
                            ProvisionedThroughput: { ReadCapacityUnits: 5, WriteCapacityUnits: 5 }
                        }
                    }
                }
            });
            test.done();
        },
        'stream is not enabled'(test) {
            const app = new TestApp();
            new lib_1.Table(app.stack, CONSTRUCT_NAME)
                .addPartitionKey(TABLE_PARTITION_KEY)
                .addSortKey(TABLE_SORT_KEY);
            const template = app.synthesizeTemplate();
            test.deepEqual(template, {
                Resources: {
                    MyTable794EDED1: {
                        Type: 'AWS::DynamoDB::Table',
                        Properties: {
                            AttributeDefinitions: [
                                { AttributeName: 'hashKey', AttributeType: 'S' },
                                { AttributeName: 'sortKey', AttributeType: 'N' }
                            ],
                            KeySchema: [
                                { AttributeName: 'hashKey', KeyType: 'HASH' },
                                { AttributeName: 'sortKey', KeyType: 'RANGE' }
                            ],
                            ProvisionedThroughput: { ReadCapacityUnits: 5, WriteCapacityUnits: 5 }
                        }
                    }
                }
            });
            test.done();
        },
        'ttl is not enabled'(test) {
            const app = new TestApp();
            new lib_1.Table(app.stack, CONSTRUCT_NAME)
                .addPartitionKey(TABLE_PARTITION_KEY)
                .addSortKey(TABLE_SORT_KEY);
            const template = app.synthesizeTemplate();
            test.deepEqual(template, {
                Resources: {
                    MyTable794EDED1: {
                        Type: 'AWS::DynamoDB::Table',
                        Properties: {
                            AttributeDefinitions: [
                                { AttributeName: 'hashKey', AttributeType: 'S' },
                                { AttributeName: 'sortKey', AttributeType: 'N' }
                            ],
                            KeySchema: [
                                { AttributeName: 'hashKey', KeyType: 'HASH' },
                                { AttributeName: 'sortKey', KeyType: 'RANGE' }
                            ],
                            ProvisionedThroughput: { ReadCapacityUnits: 5, WriteCapacityUnits: 5 }
                        }
                    }
                }
            });
            test.done();
        },
        'can specify new and old images'(test) {
            const app = new TestApp();
            const table = new lib_1.Table(app.stack, CONSTRUCT_NAME, {
                tableName: TABLE_NAME,
                readCapacity: 42,
                writeCapacity: 1337,
                streamSpecification: lib_1.StreamViewType.NewAndOldImages
            });
            table.addPartitionKey(TABLE_PARTITION_KEY);
            table.addSortKey(TABLE_SORT_KEY);
            const template = app.synthesizeTemplate();
            test.deepEqual(template, {
                Resources: {
                    MyTable794EDED1: {
                        Type: 'AWS::DynamoDB::Table',
                        Properties: {
                            AttributeDefinitions: [
                                { AttributeName: 'hashKey', AttributeType: 'S' },
                                { AttributeName: 'sortKey', AttributeType: 'N' }
                            ],
                            StreamSpecification: { StreamViewType: 'NEW_AND_OLD_IMAGES' },
                            KeySchema: [
                                { AttributeName: 'hashKey', KeyType: 'HASH' },
                                { AttributeName: 'sortKey', KeyType: 'RANGE' }
                            ],
                            ProvisionedThroughput: { ReadCapacityUnits: 42, WriteCapacityUnits: 1337 },
                            TableName: 'MyTable'
                        }
                    }
                }
            });
            test.done();
        },
        'can specify new images only'(test) {
            const app = new TestApp();
            const table = new lib_1.Table(app.stack, CONSTRUCT_NAME, {
                tableName: TABLE_NAME,
                readCapacity: 42,
                writeCapacity: 1337,
                streamSpecification: lib_1.StreamViewType.NewImage
            });
            table.addPartitionKey(TABLE_PARTITION_KEY);
            table.addSortKey(TABLE_SORT_KEY);
            const template = app.synthesizeTemplate();
            test.deepEqual(template, {
                Resources: {
                    MyTable794EDED1: {
                        Type: 'AWS::DynamoDB::Table',
                        Properties: {
                            KeySchema: [
                                { AttributeName: 'hashKey', KeyType: 'HASH' },
                                { AttributeName: 'sortKey', KeyType: 'RANGE' }
                            ],
                            ProvisionedThroughput: { ReadCapacityUnits: 42, WriteCapacityUnits: 1337 },
                            AttributeDefinitions: [
                                { AttributeName: 'hashKey', AttributeType: 'S' },
                                { AttributeName: 'sortKey', AttributeType: 'N' }
                            ],
                            StreamSpecification: { StreamViewType: 'NEW_IMAGE' },
                            TableName: 'MyTable',
                        }
                    }
                }
            });
            test.done();
        },
        'can specify old images only'(test) {
            const app = new TestApp();
            const table = new lib_1.Table(app.stack, CONSTRUCT_NAME, {
                tableName: TABLE_NAME,
                readCapacity: 42,
                writeCapacity: 1337,
                streamSpecification: lib_1.StreamViewType.OldImage
            });
            table.addPartitionKey(TABLE_PARTITION_KEY);
            table.addSortKey(TABLE_SORT_KEY);
            const template = app.synthesizeTemplate();
            test.deepEqual(template, {
                Resources: {
                    MyTable794EDED1: {
                        Type: 'AWS::DynamoDB::Table',
                        Properties: {
                            KeySchema: [
                                { AttributeName: 'hashKey', KeyType: 'HASH' },
                                { AttributeName: 'sortKey', KeyType: 'RANGE' }
                            ],
                            ProvisionedThroughput: { ReadCapacityUnits: 42, WriteCapacityUnits: 1337 },
                            AttributeDefinitions: [
                                { AttributeName: 'hashKey', AttributeType: 'S' },
                                { AttributeName: 'sortKey', AttributeType: 'N' }
                            ],
                            StreamSpecification: { StreamViewType: 'OLD_IMAGE' },
                            TableName: 'MyTable',
                        }
                    }
                }
            });
            test.done();
        }
    },
    'when specifying every property'(test) {
        const app = new TestApp();
        const table = new lib_1.Table(app.stack, CONSTRUCT_NAME, {
            tableName: TABLE_NAME,
            readCapacity: 42,
            writeCapacity: 1337,
            pitrEnabled: true,
            sseEnabled: true,
            billingMode: lib_1.BillingMode.Provisioned,
            streamSpecification: lib_1.StreamViewType.KeysOnly,
            tags: { Environment: 'Production' },
            ttlAttributeName: 'timeToLive'
        });
        table.addPartitionKey(TABLE_PARTITION_KEY);
        table.addSortKey(TABLE_SORT_KEY);
        const template = app.synthesizeTemplate();
        test.deepEqual(template, {
            Resources: {
                MyTable794EDED1: {
                    Type: 'AWS::DynamoDB::Table',
                    Properties: {
                        AttributeDefinitions: [
                            { AttributeName: 'hashKey', AttributeType: 'S' },
                            { AttributeName: 'sortKey', AttributeType: 'N' }
                        ],
                        KeySchema: [
                            { AttributeName: 'hashKey', KeyType: 'HASH' },
                            { AttributeName: 'sortKey', KeyType: 'RANGE' }
                        ],
                        ProvisionedThroughput: {
                            ReadCapacityUnits: 42,
                            WriteCapacityUnits: 1337
                        },
                        PointInTimeRecoverySpecification: { PointInTimeRecoveryEnabled: true },
                        SSESpecification: { SSEEnabled: true },
                        StreamSpecification: { StreamViewType: 'KEYS_ONLY' },
                        TableName: 'MyTable',
                        Tags: [{ Key: 'Environment', Value: 'Production' }],
                        TimeToLiveSpecification: { AttributeName: 'timeToLive', Enabled: true }
                    }
                }
            }
        });
        test.done();
    },
    'when specifying PAY_PER_REQUEST billing mode'(test) {
        const app = new TestApp();
        new lib_1.Table(app.stack, CONSTRUCT_NAME, {
            tableName: TABLE_NAME,
            billingMode: lib_1.BillingMode.PayPerRequest,
            partitionKey: TABLE_PARTITION_KEY
        });
        const template = app.synthesizeTemplate();
        test.deepEqual(template, {
            Resources: {
                MyTable794EDED1: {
                    Type: 'AWS::DynamoDB::Table',
                    Properties: {
                        KeySchema: [
                            { AttributeName: 'hashKey', KeyType: 'HASH' },
                        ],
                        BillingMode: 'PAY_PER_REQUEST',
                        AttributeDefinitions: [
                            { AttributeName: 'hashKey', AttributeType: 'S' },
                        ],
                        TableName: 'MyTable',
                    }
                }
            }
        });
        test.done();
    },
    'error when specifying read or write capacity with a PAY_PER_REQUEST billing mode'(test) {
        const app = new TestApp();
        test.throws(() => new lib_1.Table(app.stack, CONSTRUCT_NAME, {
            tableName: TABLE_NAME,
            billingMode: lib_1.BillingMode.PayPerRequest,
            partitionKey: TABLE_PARTITION_KEY,
            readCapacity: 1
        }));
        test.throws(() => new lib_1.Table(app.stack, CONSTRUCT_NAME, {
            tableName: TABLE_NAME,
            billingMode: lib_1.BillingMode.PayPerRequest,
            partitionKey: TABLE_PARTITION_KEY,
            writeCapacity: 1
        }));
        test.throws(() => new lib_1.Table(app.stack, CONSTRUCT_NAME, {
            tableName: TABLE_NAME,
            billingMode: lib_1.BillingMode.PayPerRequest,
            partitionKey: TABLE_PARTITION_KEY,
            readCapacity: 1,
            writeCapacity: 1
        }));
        test.done();
    },
    'when adding a global secondary index with hash key only'(test) {
        const app = new TestApp();
        new lib_1.Table(app.stack, CONSTRUCT_NAME)
            .addPartitionKey(TABLE_PARTITION_KEY)
            .addSortKey(TABLE_SORT_KEY)
            .addGlobalSecondaryIndex({
            indexName: GSI_NAME,
            partitionKey: GSI_PARTITION_KEY,
            readCapacity: 42,
            writeCapacity: 1337
        });
        const template = app.synthesizeTemplate();
        test.deepEqual(template, {
            Resources: {
                MyTable794EDED1: {
                    Type: 'AWS::DynamoDB::Table',
                    Properties: {
                        AttributeDefinitions: [
                            { AttributeName: 'hashKey', AttributeType: 'S' },
                            { AttributeName: 'sortKey', AttributeType: 'N' },
                            { AttributeName: 'gsiHashKey', AttributeType: 'S' },
                        ],
                        KeySchema: [
                            { AttributeName: 'hashKey', KeyType: 'HASH' },
                            { AttributeName: 'sortKey', KeyType: 'RANGE' }
                        ],
                        ProvisionedThroughput: { ReadCapacityUnits: 5, WriteCapacityUnits: 5 },
                        GlobalSecondaryIndexes: [
                            {
                                IndexName: 'MyGSI',
                                KeySchema: [
                                    { AttributeName: 'gsiHashKey', KeyType: 'HASH' },
                                ],
                                Projection: { ProjectionType: 'ALL' },
                                ProvisionedThroughput: { ReadCapacityUnits: 42, WriteCapacityUnits: 1337 }
                            }
                        ]
                    }
                }
            }
        });
        test.done();
    },
    'when adding a global secondary index with hash + range key'(test) {
        const app = new TestApp();
        new lib_1.Table(app.stack, CONSTRUCT_NAME)
            .addPartitionKey(TABLE_PARTITION_KEY)
            .addSortKey(TABLE_SORT_KEY)
            .addGlobalSecondaryIndex({
            indexName: GSI_NAME,
            partitionKey: GSI_PARTITION_KEY,
            sortKey: GSI_SORT_KEY,
            projectionType: lib_1.ProjectionType.All,
            readCapacity: 42,
            writeCapacity: 1337
        });
        const template = app.synthesizeTemplate();
        test.deepEqual(template, {
            Resources: {
                MyTable794EDED1: {
                    Type: 'AWS::DynamoDB::Table',
                    Properties: {
                        AttributeDefinitions: [
                            { AttributeName: 'hashKey', AttributeType: 'S' },
                            { AttributeName: 'sortKey', AttributeType: 'N' },
                            { AttributeName: 'gsiHashKey', AttributeType: 'S' },
                            { AttributeName: 'gsiSortKey', AttributeType: 'B' }
                        ],
                        KeySchema: [
                            { AttributeName: 'hashKey', KeyType: 'HASH' },
                            { AttributeName: 'sortKey', KeyType: 'RANGE' }
                        ],
                        ProvisionedThroughput: { ReadCapacityUnits: 5, WriteCapacityUnits: 5 },
                        GlobalSecondaryIndexes: [
                            {
                                IndexName: 'MyGSI',
                                KeySchema: [
                                    { AttributeName: 'gsiHashKey', KeyType: 'HASH' },
                                    { AttributeName: 'gsiSortKey', KeyType: 'RANGE' }
                                ],
                                Projection: { ProjectionType: 'ALL' },
                                ProvisionedThroughput: { ReadCapacityUnits: 42, WriteCapacityUnits: 1337 }
                            }
                        ]
                    }
                }
            }
        });
        test.done();
    },
    'when adding a global secondary index with projection type KEYS_ONLY'(test) {
        const app = new TestApp();
        new lib_1.Table(app.stack, CONSTRUCT_NAME)
            .addPartitionKey(TABLE_PARTITION_KEY)
            .addSortKey(TABLE_SORT_KEY)
            .addGlobalSecondaryIndex({
            indexName: GSI_NAME,
            partitionKey: GSI_PARTITION_KEY,
            sortKey: GSI_SORT_KEY,
            projectionType: lib_1.ProjectionType.KeysOnly,
        });
        const template = app.synthesizeTemplate();
        test.deepEqual(template, {
            Resources: {
                MyTable794EDED1: {
                    Type: 'AWS::DynamoDB::Table',
                    Properties: {
                        AttributeDefinitions: [
                            { AttributeName: 'hashKey', AttributeType: 'S' },
                            { AttributeName: 'sortKey', AttributeType: 'N' },
                            { AttributeName: 'gsiHashKey', AttributeType: 'S' },
                            { AttributeName: 'gsiSortKey', AttributeType: 'B' }
                        ],
                        KeySchema: [
                            { AttributeName: 'hashKey', KeyType: 'HASH' },
                            { AttributeName: 'sortKey', KeyType: 'RANGE' }
                        ],
                        ProvisionedThroughput: { ReadCapacityUnits: 5, WriteCapacityUnits: 5 },
                        GlobalSecondaryIndexes: [
                            {
                                IndexName: 'MyGSI',
                                KeySchema: [
                                    { AttributeName: 'gsiHashKey', KeyType: 'HASH' },
                                    { AttributeName: 'gsiSortKey', KeyType: 'RANGE' }
                                ],
                                Projection: { ProjectionType: 'KEYS_ONLY' },
                                ProvisionedThroughput: { ReadCapacityUnits: 5, WriteCapacityUnits: 5 }
                            }
                        ]
                    }
                }
            }
        });
        test.done();
    },
    'when adding a global secondary index with projection type INCLUDE'(test) {
        const app = new TestApp();
        const table = new lib_1.Table(app.stack, CONSTRUCT_NAME)
            .addPartitionKey(TABLE_PARTITION_KEY)
            .addSortKey(TABLE_SORT_KEY);
        const gsiNonKeyAttributeGenerator = NON_KEY_ATTRIBUTE_GENERATOR(GSI_NON_KEY);
        table.addGlobalSecondaryIndex({
            indexName: GSI_NAME,
            partitionKey: GSI_PARTITION_KEY,
            sortKey: GSI_SORT_KEY,
            projectionType: lib_1.ProjectionType.Include,
            nonKeyAttributes: [gsiNonKeyAttributeGenerator.next().value, gsiNonKeyAttributeGenerator.next().value],
            readCapacity: 42,
            writeCapacity: 1337
        });
        const template = app.synthesizeTemplate();
        test.deepEqual(template, {
            Resources: {
                MyTable794EDED1: {
                    Type: 'AWS::DynamoDB::Table',
                    Properties: {
                        AttributeDefinitions: [
                            { AttributeName: 'hashKey', AttributeType: 'S' },
                            { AttributeName: 'sortKey', AttributeType: 'N' },
                            { AttributeName: 'gsiHashKey', AttributeType: 'S' },
                            { AttributeName: 'gsiSortKey', AttributeType: 'B' }
                        ],
                        KeySchema: [
                            { AttributeName: 'hashKey', KeyType: 'HASH' },
                            { AttributeName: 'sortKey', KeyType: 'RANGE' }
                        ],
                        ProvisionedThroughput: { ReadCapacityUnits: 5, WriteCapacityUnits: 5 },
                        GlobalSecondaryIndexes: [
                            {
                                IndexName: 'MyGSI',
                                KeySchema: [
                                    { AttributeName: 'gsiHashKey', KeyType: 'HASH' },
                                    { AttributeName: 'gsiSortKey', KeyType: 'RANGE' }
                                ],
                                Projection: { NonKeyAttributes: ['gsiNonKey0', 'gsiNonKey1'], ProjectionType: 'INCLUDE' },
                                ProvisionedThroughput: { ReadCapacityUnits: 42, WriteCapacityUnits: 1337 }
                            }
                        ]
                    }
                }
            }
        });
        test.done();
    },
    'when adding a global secondary index on a table with PAY_PER_REQUEST billing mode'(test) {
        const app = new TestApp();
        new lib_1.Table(app.stack, CONSTRUCT_NAME, {
            billingMode: lib_1.BillingMode.PayPerRequest,
            partitionKey: TABLE_PARTITION_KEY,
            sortKey: TABLE_SORT_KEY
        }).addGlobalSecondaryIndex({
            indexName: GSI_NAME,
            partitionKey: GSI_PARTITION_KEY,
        });
        const template = app.synthesizeTemplate();
        test.deepEqual(template, {
            Resources: {
                MyTable794EDED1: {
                    Type: 'AWS::DynamoDB::Table',
                    Properties: {
                        AttributeDefinitions: [
                            { AttributeName: 'hashKey', AttributeType: 'S' },
                            { AttributeName: 'sortKey', AttributeType: 'N' },
                            { AttributeName: 'gsiHashKey', AttributeType: 'S' },
                        ],
                        BillingMode: 'PAY_PER_REQUEST',
                        KeySchema: [
                            { AttributeName: 'hashKey', KeyType: 'HASH' },
                            { AttributeName: 'sortKey', KeyType: 'RANGE' }
                        ],
                        GlobalSecondaryIndexes: [
                            {
                                IndexName: 'MyGSI',
                                KeySchema: [
                                    { AttributeName: 'gsiHashKey', KeyType: 'HASH' },
                                ],
                                Projection: { ProjectionType: 'ALL' }
                            }
                        ]
                    }
                }
            }
        });
        test.done();
    },
    'error when adding a global secondary index with projection type INCLUDE, but without specifying non-key attributes'(test) {
        const app = new TestApp();
        const table = new lib_1.Table(app.stack, CONSTRUCT_NAME)
            .addPartitionKey(TABLE_PARTITION_KEY)
            .addSortKey(TABLE_SORT_KEY);
        test.throws(() => table.addGlobalSecondaryIndex({
            indexName: GSI_NAME,
            partitionKey: GSI_PARTITION_KEY,
            sortKey: GSI_SORT_KEY,
            projectionType: lib_1.ProjectionType.Include
        }), /non-key attributes should be specified when using INCLUDE projection type/);
        test.done();
    },
    'error when adding a global secondary index with projection type ALL, but with non-key attributes'(test) {
        const app = new TestApp();
        const table = new lib_1.Table(app.stack, CONSTRUCT_NAME)
            .addPartitionKey(TABLE_PARTITION_KEY)
            .addSortKey(TABLE_SORT_KEY);
        const gsiNonKeyAttributeGenerator = NON_KEY_ATTRIBUTE_GENERATOR(GSI_NON_KEY);
        test.throws(() => table.addGlobalSecondaryIndex({
            indexName: GSI_NAME,
            partitionKey: GSI_PARTITION_KEY,
            nonKeyAttributes: [gsiNonKeyAttributeGenerator.next().value]
        }), /non-key attributes should not be specified when not using INCLUDE projection type/);
        test.done();
    },
    'error when adding a global secondary index with projection type KEYS_ONLY, but with non-key attributes'(test) {
        const app = new TestApp();
        const table = new lib_1.Table(app.stack, CONSTRUCT_NAME)
            .addPartitionKey(TABLE_PARTITION_KEY)
            .addSortKey(TABLE_SORT_KEY);
        const gsiNonKeyAttributeGenerator = NON_KEY_ATTRIBUTE_GENERATOR(GSI_NON_KEY);
        test.throws(() => table.addGlobalSecondaryIndex({
            indexName: GSI_NAME,
            partitionKey: GSI_PARTITION_KEY,
            projectionType: lib_1.ProjectionType.KeysOnly,
            nonKeyAttributes: [gsiNonKeyAttributeGenerator.next().value]
        }), /non-key attributes should not be specified when not using INCLUDE projection type/);
        test.done();
    },
    'error when adding a global secondary index with projection type INCLUDE, but with more than 20 non-key attributes'(test) {
        const app = new TestApp();
        const table = new lib_1.Table(app.stack, CONSTRUCT_NAME)
            .addPartitionKey(TABLE_PARTITION_KEY)
            .addSortKey(TABLE_SORT_KEY);
        const gsiNonKeyAttributeGenerator = NON_KEY_ATTRIBUTE_GENERATOR(GSI_NON_KEY);
        const gsiNonKeyAttributes = [];
        for (let i = 0; i < 21; i++) {
            gsiNonKeyAttributes.push(gsiNonKeyAttributeGenerator.next().value);
        }
        test.throws(() => table.addGlobalSecondaryIndex({
            indexName: GSI_NAME,
            partitionKey: GSI_PARTITION_KEY,
            sortKey: GSI_SORT_KEY,
            projectionType: lib_1.ProjectionType.Include,
            nonKeyAttributes: gsiNonKeyAttributes
        }), /a maximum number of nonKeyAttributes across all of secondary indexes is 20/);
        test.done();
    },
    'error when adding a global secondary index with projection type INCLUDE, but with key attributes'(test) {
        const app = new TestApp();
        const table = new lib_1.Table(app.stack, CONSTRUCT_NAME)
            .addPartitionKey(TABLE_PARTITION_KEY)
            .addSortKey(TABLE_SORT_KEY);
        test.throws(() => table.addGlobalSecondaryIndex({
            indexName: GSI_NAME,
            partitionKey: GSI_PARTITION_KEY,
            sortKey: GSI_SORT_KEY,
            projectionType: lib_1.ProjectionType.Include,
            nonKeyAttributes: [GSI_NON_KEY, TABLE_PARTITION_KEY.name]
            // tslint:disable-next-line:max-line-length
        }), /a key attribute, hashKey, is part of a list of non-key attributes, gsiNonKey,hashKey, which is not allowed since all key attributes are added automatically and this configuration causes stack creation failure/);
        test.done();
    },
    'error when adding a global secondary index with read or write capacity on a PAY_PER_REQUEST table'(test) {
        const app = new TestApp();
        const table = new lib_1.Table(app.stack, CONSTRUCT_NAME, {
            partitionKey: TABLE_PARTITION_KEY,
            billingMode: lib_1.BillingMode.PayPerRequest
        });
        test.throws(() => table.addGlobalSecondaryIndex({
            indexName: GSI_NAME,
            partitionKey: GSI_PARTITION_KEY,
            sortKey: GSI_SORT_KEY,
            readCapacity: 1
        }));
        test.throws(() => table.addGlobalSecondaryIndex({
            indexName: GSI_NAME,
            partitionKey: GSI_PARTITION_KEY,
            sortKey: GSI_SORT_KEY,
            writeCapacity: 1
        }));
        test.throws(() => table.addGlobalSecondaryIndex({
            indexName: GSI_NAME,
            partitionKey: GSI_PARTITION_KEY,
            sortKey: GSI_SORT_KEY,
            readCapacity: 1,
            writeCapacity: 1
        }));
        test.done();
    },
    'when adding multiple global secondary indexes'(test) {
        const app = new TestApp();
        const table = new lib_1.Table(app.stack, CONSTRUCT_NAME)
            .addPartitionKey(TABLE_PARTITION_KEY)
            .addSortKey(TABLE_SORT_KEY);
        const gsiGenerator = GSI_GENERATOR();
        for (let i = 0; i < 5; i++) {
            table.addGlobalSecondaryIndex(gsiGenerator.next().value);
        }
        const template = app.synthesizeTemplate();
        test.deepEqual(template, {
            Resources: {
                MyTable794EDED1: {
                    Type: 'AWS::DynamoDB::Table',
                    Properties: {
                        AttributeDefinitions: [
                            { AttributeName: 'hashKey', AttributeType: 'S' },
                            { AttributeName: 'sortKey', AttributeType: 'N' },
                            { AttributeName: 'gsiHashKey0', AttributeType: 'S' },
                            { AttributeName: 'gsiHashKey1', AttributeType: 'S' },
                            { AttributeName: 'gsiHashKey2', AttributeType: 'S' },
                            { AttributeName: 'gsiHashKey3', AttributeType: 'S' },
                            { AttributeName: 'gsiHashKey4', AttributeType: 'S' }
                        ],
                        KeySchema: [
                            { AttributeName: 'hashKey', KeyType: 'HASH' },
                            { AttributeName: 'sortKey', KeyType: 'RANGE' }
                        ],
                        ProvisionedThroughput: { ReadCapacityUnits: 5, WriteCapacityUnits: 5 },
                        GlobalSecondaryIndexes: [
                            {
                                IndexName: 'MyGSI0',
                                KeySchema: [
                                    { AttributeName: 'gsiHashKey0', KeyType: 'HASH' },
                                ],
                                Projection: { ProjectionType: 'ALL' },
                                ProvisionedThroughput: { ReadCapacityUnits: 5, WriteCapacityUnits: 5 }
                            },
                            {
                                IndexName: 'MyGSI1',
                                KeySchema: [
                                    { AttributeName: 'gsiHashKey1', KeyType: 'HASH' },
                                ],
                                Projection: { ProjectionType: 'ALL' },
                                ProvisionedThroughput: { ReadCapacityUnits: 5, WriteCapacityUnits: 5 }
                            },
                            {
                                IndexName: 'MyGSI2',
                                KeySchema: [
                                    { AttributeName: 'gsiHashKey2', KeyType: 'HASH' },
                                ],
                                Projection: { ProjectionType: 'ALL' },
                                ProvisionedThroughput: { ReadCapacityUnits: 5, WriteCapacityUnits: 5 }
                            },
                            {
                                IndexName: 'MyGSI3',
                                KeySchema: [
                                    { AttributeName: 'gsiHashKey3', KeyType: 'HASH' },
                                ],
                                Projection: { ProjectionType: 'ALL' },
                                ProvisionedThroughput: { ReadCapacityUnits: 5, WriteCapacityUnits: 5 }
                            },
                            {
                                IndexName: 'MyGSI4',
                                KeySchema: [
                                    { AttributeName: 'gsiHashKey4', KeyType: 'HASH' },
                                ],
                                Projection: { ProjectionType: 'ALL' },
                                ProvisionedThroughput: { ReadCapacityUnits: 5, WriteCapacityUnits: 5 }
                            },
                        ]
                    }
                }
            }
        });
        test.done();
    },
    'error when adding more than 5 global secondary indexes'(test) {
        const app = new TestApp();
        const table = new lib_1.Table(app.stack, CONSTRUCT_NAME)
            .addPartitionKey(TABLE_PARTITION_KEY)
            .addSortKey(TABLE_SORT_KEY);
        const gsiGenerator = GSI_GENERATOR();
        for (let i = 0; i < 5; i++) {
            table.addGlobalSecondaryIndex(gsiGenerator.next().value);
        }
        test.throws(() => table.addGlobalSecondaryIndex(gsiGenerator.next().value), /a maximum number of global secondary index per table is 5/);
        test.done();
    },
    'when adding a global secondary index without specifying read and write capacity'(test) {
        const app = new TestApp();
        new lib_1.Table(app.stack, CONSTRUCT_NAME)
            .addPartitionKey(TABLE_PARTITION_KEY)
            .addSortKey(TABLE_SORT_KEY)
            .addGlobalSecondaryIndex({
            indexName: GSI_NAME,
            partitionKey: GSI_PARTITION_KEY,
        });
        const template = app.synthesizeTemplate();
        test.deepEqual(template, {
            Resources: {
                MyTable794EDED1: {
                    Type: 'AWS::DynamoDB::Table',
                    Properties: {
                        AttributeDefinitions: [
                            { AttributeName: 'hashKey', AttributeType: 'S' },
                            { AttributeName: 'sortKey', AttributeType: 'N' },
                            { AttributeName: 'gsiHashKey', AttributeType: 'S' }
                        ],
                        KeySchema: [
                            { AttributeName: 'hashKey', KeyType: 'HASH' },
                            { AttributeName: 'sortKey', KeyType: 'RANGE' }
                        ],
                        ProvisionedThroughput: { ReadCapacityUnits: 5, WriteCapacityUnits: 5 },
                        GlobalSecondaryIndexes: [
                            {
                                IndexName: 'MyGSI',
                                KeySchema: [
                                    { AttributeName: 'gsiHashKey', KeyType: 'HASH' },
                                ],
                                Projection: { ProjectionType: 'ALL' },
                                ProvisionedThroughput: { ReadCapacityUnits: 5, WriteCapacityUnits: 5 }
                            }
                        ]
                    }
                }
            }
        });
        test.done();
    },
    'when adding a local secondary index with hash + range key'(test) {
        const app = new TestApp();
        new lib_1.Table(app.stack, CONSTRUCT_NAME)
            .addPartitionKey(TABLE_PARTITION_KEY)
            .addSortKey(TABLE_SORT_KEY)
            .addLocalSecondaryIndex({
            indexName: LSI_NAME,
            sortKey: LSI_SORT_KEY,
        });
        const template = app.synthesizeTemplate();
        test.deepEqual(template, {
            Resources: {
                MyTable794EDED1: {
                    Type: 'AWS::DynamoDB::Table',
                    Properties: {
                        AttributeDefinitions: [
                            { AttributeName: 'hashKey', AttributeType: 'S' },
                            { AttributeName: 'sortKey', AttributeType: 'N' },
                            { AttributeName: 'lsiSortKey', AttributeType: 'N' }
                        ],
                        KeySchema: [
                            { AttributeName: 'hashKey', KeyType: 'HASH' },
                            { AttributeName: 'sortKey', KeyType: 'RANGE' }
                        ],
                        ProvisionedThroughput: { ReadCapacityUnits: 5, WriteCapacityUnits: 5 },
                        LocalSecondaryIndexes: [
                            {
                                IndexName: 'MyLSI',
                                KeySchema: [
                                    { AttributeName: 'hashKey', KeyType: 'HASH' },
                                    { AttributeName: 'lsiSortKey', KeyType: 'RANGE' }
                                ],
                                Projection: { ProjectionType: 'ALL' },
                            }
                        ],
                    }
                }
            }
        });
        test.done();
    },
    'when adding a local secondary index with projection type KEYS_ONLY'(test) {
        const app = new TestApp();
        new lib_1.Table(app.stack, CONSTRUCT_NAME)
            .addPartitionKey(TABLE_PARTITION_KEY)
            .addSortKey(TABLE_SORT_KEY)
            .addLocalSecondaryIndex({
            indexName: LSI_NAME,
            sortKey: LSI_SORT_KEY,
            projectionType: lib_1.ProjectionType.KeysOnly
        });
        const template = app.synthesizeTemplate();
        test.deepEqual(template, {
            Resources: {
                MyTable794EDED1: {
                    Type: 'AWS::DynamoDB::Table',
                    Properties: {
                        AttributeDefinitions: [
                            { AttributeName: 'hashKey', AttributeType: 'S' },
                            { AttributeName: 'sortKey', AttributeType: 'N' },
                            { AttributeName: 'lsiSortKey', AttributeType: 'N' }
                        ],
                        KeySchema: [
                            { AttributeName: 'hashKey', KeyType: 'HASH' },
                            { AttributeName: 'sortKey', KeyType: 'RANGE' }
                        ],
                        ProvisionedThroughput: { ReadCapacityUnits: 5, WriteCapacityUnits: 5 },
                        LocalSecondaryIndexes: [
                            {
                                IndexName: 'MyLSI',
                                KeySchema: [
                                    { AttributeName: 'hashKey', KeyType: 'HASH' },
                                    { AttributeName: 'lsiSortKey', KeyType: 'RANGE' }
                                ],
                                Projection: { ProjectionType: 'KEYS_ONLY' },
                            }
                        ],
                    }
                }
            }
        });
        test.done();
    },
    'when adding a local secondary index with projection type INCLUDE'(test) {
        const app = new TestApp();
        const table = new lib_1.Table(app.stack, CONSTRUCT_NAME)
            .addPartitionKey(TABLE_PARTITION_KEY)
            .addSortKey(TABLE_SORT_KEY);
        const lsiNonKeyAttributeGenerator = NON_KEY_ATTRIBUTE_GENERATOR(LSI_NON_KEY);
        table.addLocalSecondaryIndex({
            indexName: LSI_NAME,
            sortKey: LSI_SORT_KEY,
            projectionType: lib_1.ProjectionType.Include,
            nonKeyAttributes: [lsiNonKeyAttributeGenerator.next().value, lsiNonKeyAttributeGenerator.next().value]
        });
        const template = app.synthesizeTemplate();
        test.deepEqual(template, {
            Resources: {
                MyTable794EDED1: {
                    Type: 'AWS::DynamoDB::Table',
                    Properties: {
                        AttributeDefinitions: [
                            { AttributeName: 'hashKey', AttributeType: 'S' },
                            { AttributeName: 'sortKey', AttributeType: 'N' },
                            { AttributeName: 'lsiSortKey', AttributeType: 'N' }
                        ],
                        KeySchema: [
                            { AttributeName: 'hashKey', KeyType: 'HASH' },
                            { AttributeName: 'sortKey', KeyType: 'RANGE' }
                        ],
                        ProvisionedThroughput: { ReadCapacityUnits: 5, WriteCapacityUnits: 5 },
                        LocalSecondaryIndexes: [
                            {
                                IndexName: 'MyLSI',
                                KeySchema: [
                                    { AttributeName: 'hashKey', KeyType: 'HASH' },
                                    { AttributeName: 'lsiSortKey', KeyType: 'RANGE' }
                                ],
                                Projection: { NonKeyAttributes: ['lsiNonKey0', 'lsiNonKey1'], ProjectionType: 'INCLUDE' },
                            }
                        ],
                    }
                }
            }
        });
        test.done();
    },
    'error when adding more than 5 local secondary indexes'(test) {
        const app = new TestApp();
        const table = new lib_1.Table(app.stack, CONSTRUCT_NAME)
            .addPartitionKey(TABLE_PARTITION_KEY)
            .addSortKey(TABLE_SORT_KEY);
        const lsiGenerator = LSI_GENERATOR();
        for (let i = 0; i < 5; i++) {
            table.addLocalSecondaryIndex(lsiGenerator.next().value);
        }
        test.throws(() => table.addLocalSecondaryIndex(lsiGenerator.next().value), /a maximum number of local secondary index per table is 5/);
        test.done();
    },
    'error when adding a local secondary index before specifying a partition key of the table'(test) {
        const app = new TestApp();
        const table = new lib_1.Table(app.stack, CONSTRUCT_NAME)
            .addSortKey(TABLE_SORT_KEY);
        test.throws(() => table.addLocalSecondaryIndex({
            indexName: LSI_NAME,
            sortKey: LSI_SORT_KEY
        }), /a partition key of the table must be specified first through addPartitionKey()/);
        test.done();
    },
    'error when adding a local secondary index with the name of a global secondary index'(test) {
        const app = new TestApp();
        const table = new lib_1.Table(app.stack, CONSTRUCT_NAME)
            .addPartitionKey(TABLE_PARTITION_KEY)
            .addSortKey(TABLE_SORT_KEY);
        table.addGlobalSecondaryIndex({
            indexName: 'SecondaryIndex',
            partitionKey: GSI_PARTITION_KEY
        });
        test.throws(() => table.addLocalSecondaryIndex({
            indexName: 'SecondaryIndex',
            sortKey: LSI_SORT_KEY
        }), /a duplicate index name, SecondaryIndex, is not allowed/);
        test.done();
    },
    'error when validating construct if a local secondary index exists without a sort key of the table'(test) {
        const app = new TestApp();
        const table = new lib_1.Table(app.stack, CONSTRUCT_NAME)
            .addPartitionKey(TABLE_PARTITION_KEY);
        table.addLocalSecondaryIndex({
            indexName: LSI_NAME,
            sortKey: LSI_SORT_KEY
        });
        const errors = table.validate();
        test.strictEqual(1, errors.length);
        test.strictEqual('a sort key of the table must be specified to add local secondary indexes', errors[0]);
        test.done();
    },
    'can enable Read AutoScaling'(test) {
        // GIVEN
        const app = new TestApp();
        const table = new lib_1.Table(app.stack, CONSTRUCT_NAME, { readCapacity: 42, writeCapacity: 1337 });
        table.addPartitionKey(TABLE_PARTITION_KEY);
        // WHEN
        table.autoScaleReadCapacity({ minCapacity: 50, maxCapacity: 500 }).scaleOnUtilization({ targetUtilizationPercent: 75 });
        // THEN
        assert_1.expect(app.stack).to(assert_1.haveResource('AWS::ApplicationAutoScaling::ScalableTarget', {
            MaxCapacity: 500,
            MinCapacity: 50,
            ScalableDimension: 'dynamodb:table:ReadCapacityUnits',
            ServiceNamespace: 'dynamodb'
        }));
        assert_1.expect(app.stack).to(assert_1.haveResource('AWS::ApplicationAutoScaling::ScalingPolicy', {
            PolicyType: 'TargetTrackingScaling',
            TargetTrackingScalingPolicyConfiguration: {
                PredefinedMetricSpecification: { PredefinedMetricType: 'DynamoDBReadCapacityUtilization' },
                TargetValue: 75
            }
        }));
        test.done();
    },
    'can enable Write AutoScaling'(test) {
        // GIVEN
        const app = new TestApp();
        const table = new lib_1.Table(app.stack, CONSTRUCT_NAME, { readCapacity: 42, writeCapacity: 1337 });
        table.addPartitionKey(TABLE_PARTITION_KEY);
        // WHEN
        table.autoScaleWriteCapacity({ minCapacity: 50, maxCapacity: 500 }).scaleOnUtilization({ targetUtilizationPercent: 75 });
        // THEN
        assert_1.expect(app.stack).to(assert_1.haveResource('AWS::ApplicationAutoScaling::ScalableTarget', {
            MaxCapacity: 500,
            MinCapacity: 50,
            ScalableDimension: 'dynamodb:table:WriteCapacityUnits',
            ServiceNamespace: 'dynamodb'
        }));
        assert_1.expect(app.stack).to(assert_1.haveResource('AWS::ApplicationAutoScaling::ScalingPolicy', {
            PolicyType: 'TargetTrackingScaling',
            TargetTrackingScalingPolicyConfiguration: {
                PredefinedMetricSpecification: { PredefinedMetricType: 'DynamoDBWriteCapacityUtilization' },
                TargetValue: 75
            }
        }));
        test.done();
    },
    'cannot enable AutoScaling twice on the same property'(test) {
        // GIVEN
        const app = new TestApp();
        const table = new lib_1.Table(app.stack, CONSTRUCT_NAME, { readCapacity: 42, writeCapacity: 1337 });
        table.addPartitionKey(TABLE_PARTITION_KEY);
        table.autoScaleReadCapacity({ minCapacity: 50, maxCapacity: 500 }).scaleOnUtilization({ targetUtilizationPercent: 75 });
        // WHEN
        test.throws(() => {
            table.autoScaleReadCapacity({ minCapacity: 50, maxCapacity: 500 });
        });
        test.done();
    },
    'error when enabling AutoScaling on the PAY_PER_REQUEST table'(test) {
        // GIVEN
        const app = new TestApp();
        const table = new lib_1.Table(app.stack, CONSTRUCT_NAME, { billingMode: lib_1.BillingMode.PayPerRequest });
        table.addPartitionKey(TABLE_PARTITION_KEY);
        table.addGlobalSecondaryIndex({
            indexName: GSI_NAME,
            partitionKey: GSI_PARTITION_KEY
        });
        // WHEN
        test.throws(() => {
            table.autoScaleReadCapacity({ minCapacity: 50, maxCapacity: 500 });
        });
        test.throws(() => {
            table.autoScaleWriteCapacity({ minCapacity: 50, maxCapacity: 500 });
        });
        test.throws(() => table.autoScaleGlobalSecondaryIndexReadCapacity(GSI_NAME, {
            minCapacity: 1,
            maxCapacity: 5
        }));
        test.done();
    },
    'error when specifying Read Auto Scaling with invalid scalingTargetValue < 10'(test) {
        // GIVEN
        const app = new TestApp();
        const table = new lib_1.Table(app.stack, CONSTRUCT_NAME, { readCapacity: 42, writeCapacity: 1337 });
        // THEN
        test.throws(() => {
            table.autoScaleReadCapacity({ minCapacity: 50, maxCapacity: 500 }).scaleOnUtilization({ targetUtilizationPercent: 5 });
        });
        test.done();
    },
    'error when specifying Read Auto Scaling with invalid minimumCapacity'(test) {
        // GIVEN
        const app = new TestApp();
        const table = new lib_1.Table(app.stack, CONSTRUCT_NAME, { readCapacity: 42, writeCapacity: 1337 });
        // THEN
        test.throws(() => table.autoScaleReadCapacity({ minCapacity: 10, maxCapacity: 5 }));
        test.done();
    },
    'can autoscale on a schedule'(test) {
        // GIVEN
        const app = new TestApp();
        const table = new lib_1.Table(app.stack, CONSTRUCT_NAME, { readCapacity: 42, writeCapacity: 1337 });
        table.addPartitionKey({ name: 'Hash', type: lib_1.AttributeType.String });
        // WHEN
        const scaling = table.autoScaleReadCapacity({ minCapacity: 1, maxCapacity: 100 });
        scaling.scaleOnSchedule('SaveMoneyByNotScalingUp', {
            schedule: 'cron(* * ? * * )',
            maxCapacity: 10
        });
        // THEN
        assert_1.expect(app.stack).to(assert_1.haveResource('AWS::ApplicationAutoScaling::ScalableTarget', {
            ScheduledActions: [
                {
                    ScalableTargetAction: { "MaxCapacity": 10 },
                    Schedule: "cron(* * ? * * )",
                    ScheduledActionName: "SaveMoneyByNotScalingUp"
                }
            ]
        }));
        test.done();
    },
    'grants': {
        '"grant" allows adding arbitrary actions associated with this table resource'(test) {
            testGrant(test, ['action1', 'action2'], (p, t) => t.grant(p, 'dynamodb:action1', 'dynamodb:action2'));
        },
        '"grantReadData" allows the principal to read data from the table'(test) {
            testGrant(test, ['BatchGetItem', 'GetRecords', 'GetShardIterator', 'Query', 'GetItem', 'Scan'], (p, t) => t.grantReadData(p));
        },
        '"grantWriteData" allows the principal to write data to the table'(test) {
            testGrant(test, [
                'BatchWriteItem', 'PutItem', 'UpdateItem', 'DeleteItem'
            ], (p, t) => t.grantWriteData(p));
        },
        '"grantReadWriteData" allows the principal to read/write data'(test) {
            testGrant(test, [
                'BatchGetItem', 'GetRecords', 'GetShardIterator', 'Query', 'GetItem', 'Scan',
                'BatchWriteItem', 'PutItem', 'UpdateItem', 'DeleteItem'
            ], (p, t) => t.grantReadWriteData(p));
        },
        '"grantFullAccess" allows the principal to perform any action on the table ("*")'(test) {
            testGrant(test, ['*'], (p, t) => t.grantFullAccess(p));
        }
    },
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGVzdC5keW5hbW9kYi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInRlc3QuZHluYW1vZGIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLDRDQUF1RDtBQUN2RCx3Q0FBeUM7QUFDekMsc0NBQTBDO0FBRTFDLGdDQVNnQjtBQUVoQiwyQ0FBMkM7QUFFM0MsaUJBQWlCO0FBQ2pCLE1BQU0sVUFBVSxHQUFHLFNBQVMsQ0FBQztBQUM3QixNQUFNLGNBQWMsR0FBRyxTQUFTLENBQUM7QUFFakMsNEJBQTRCO0FBQzVCLE1BQU0sVUFBVSxHQUFHLFNBQVMsQ0FBQztBQUM3QixNQUFNLG1CQUFtQixHQUFjLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsbUJBQWEsQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUN2RixNQUFNLGNBQWMsR0FBYyxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLG1CQUFhLENBQUMsTUFBTSxFQUFFLENBQUM7QUFFbEYsNkNBQTZDO0FBQzdDLE1BQU0sUUFBUSxHQUFHLE9BQU8sQ0FBQztBQUN6QixNQUFNLGlCQUFpQixHQUFjLEVBQUUsSUFBSSxFQUFFLFlBQVksRUFBRSxJQUFJLEVBQUUsbUJBQWEsQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUN4RixNQUFNLFlBQVksR0FBYyxFQUFFLElBQUksRUFBRSxZQUFZLEVBQUUsSUFBSSxFQUFFLG1CQUFhLENBQUMsTUFBTSxFQUFFLENBQUM7QUFDbkYsTUFBTSxXQUFXLEdBQUcsV0FBVyxDQUFDO0FBQ2hDLFFBQVEsQ0FBQyxDQUFDLGFBQWE7SUFDckIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ1YsT0FBTyxJQUFJLEVBQUU7UUFDWCxNQUFNLHlCQUF5QixHQUE4QjtZQUMzRCxTQUFTLEVBQUUsR0FBRyxRQUFRLEdBQUcsQ0FBQyxFQUFFO1lBQzVCLFlBQVksRUFBRSxFQUFFLElBQUksRUFBRSxHQUFHLGlCQUFpQixDQUFDLElBQUksR0FBRyxD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RSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMzRCxDQUFDO0tBQ0Y7Q0FDRixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZXhwZWN0LCBoYXZlUmVzb3VyY2UgfSBmcm9tICdAYXdzLWNkay9hc3NlcnQnO1xuaW1wb3J0IGlhbSA9IHJlcXVpcmUoJ0Bhd3MtY2RrL2F3cy1pYW0nKTtcbmltcG9ydCB7IEFwcCwgU3RhY2sgfSBmcm9tICdAYXdzLWNkay9jZGsnO1xuaW1wb3J0IHsgVGVzdCB9IGZyb20gJ25vZGV1bml0JztcbmltcG9ydCB7XG4gIEF0dHJpYnV0ZSxcbiAgQXR0cmlidXRlVHlwZSxcbiAgQmlsbGluZ01vZGUsXG4gIEdsb2JhbFNlY29uZGFyeUluZGV4UHJvcHMsXG4gIExvY2FsU2Vjb25kYXJ5SW5kZXhQcm9wcyxcbiAgUHJvamVjdGlvblR5cGUsXG4gIFN0cmVhbVZpZXdUeXBlLFxuICBUYWJsZVxufSBmcm9tICcuLi9saWInO1xuXG4vLyB0c2xpbnQ6ZGlzYWJsZTpvYmplY3QtbGl0ZXJhbC1rZXktcXVvdGVzXG5cbi8vIENESyBwYXJhbWV0ZXJzXG5jb25zdCBTVEFDS19OQU1FID0gJ015U3RhY2snO1xuY29uc3QgQ09OU1RSVUNUX05BTUUgPSAnTXlUYWJsZSc7XG5cbi8vIER5bmFtb0RCIHRhYmxlIHBhcmFtZXRlcnNcbmNvbnN0IFRBQkxFX05BTUUgPSAnTXlUYWJsZSc7XG5jb25zdCBUQUJMRV9QQVJUSVRJT05fS0VZOiBBdHRyaWJ1dGUgPSB7IG5hbWU6ICdoYXNoS2V5JywgdHlwZTogQXR0cmlidXRlVHlwZS5TdHJpbmcgfTtcbmNvbnN0IFRBQkxFX1NPUlRfS0VZOiBBdHRyaWJ1dGUgPSB7IG5hbWU6ICdzb3J0S2V5JywgdHlwZTogQXR0cmlidXRlVHlwZS5OdW1iZXIgfTtcblxuLy8gRHluYW1vREIgZ2xvYmFsIHNlY29uZGFyeSBpbmRleCBwYXJhbWV0ZXJzXG5jb25zdCBHU0lfTkFNRSA9ICdNeUdTSSc7XG5jb25zdCBHU0lfUEFSVElUSU9OX0tFWTogQXR0cmlidXRlID0geyBuYW1lOiAnZ3NpSGFzaEtleScsIHR5cGU6IEF0dHJpYnV0ZVR5cGUuU3RyaW5nIH07XG5jb25zdCBHU0lfU09SVF9LRVk6IEF0dHJpYnV0ZSA9IHsgbmFtZTogJ2dzaVNvcnRLZXknLCB0eXBlOiBBdHRyaWJ1dGVUeXBlLkJpbmFyeSB9O1xuY29uc3QgR1NJX05PTl9LRVkgPSAnZ3NpTm9uS2V5JztcbmZ1bmN0aW9uKiBHU0lfR0VORVJBVE9SKCkge1xuICBsZXQgbiA9IDA7XG4gIHdoaWxlICh0cnVlKSB7XG4gICAgY29uc3QgZ2xvYmFsU2Vjb25kYXJ5SW5kZXhQcm9wczogR2xvYmFsU2Vjb25kYXJ5SW5kZXhQcm9wcyA9IHtcbiAgICAgIGluZGV4TmFtZTogYCR7R1NJX05BTUV9JHtufWAsXG4gICAgICBwYXJ0aXRpb25LZXk6IHsgbmFtZTogYCR7R1NJX1BBUlRJVElPTl9LRVkubmFtZX0ke259YCwgdHlwZTogR1NJX1BBUlRJVElPTl9LRVkudHlwZSB9XG4gICAgfTtcbiAgICB5aWVsZCBnbG9iYWxTZWNvbmRhcnlJbmRleFByb3BzO1xuICAgIG4rKztcbiAgfVxufVxuZnVuY3Rpb24qIE5PTl9LRVlfQVRUUklCVVRFX0dFTkVSQVRPUihub25LZXlQcmVmaXg6IHN0cmluZykge1xuICBsZXQgbiA9IDA7XG4gIHdoaWxlICh0cnVlKSB7XG4gICAgeWllbGQgYCR7bm9uS2V5UHJlZml4fSR7bn1gO1xuICAgIG4rKztcbiAgfVxufVxuXG4vLyBEeW5hbW9EQiBsb2NhbCBzZWNvbmRhcnkgaW5kZXggcGFyYW1ldGVyc1xuY29uc3QgTFNJX05BTUUgPSAnTXlMU0knO1xuY29uc3QgTFNJX1NPUlRfS0VZOiBBdHRyaWJ1dGUgPSB7IG5hbWU6ICdsc2lTb3J0S2V5JywgdHlwZTogQXR0cmlidXRlVHlwZS5OdW1iZXIgfTtcbmNvbnN0IExTSV9OT05fS0VZID0gJ2xzaU5vbktleSc7XG5mdW5jdGlvbiogTFNJX0dFTkVSQVRPUigpIHtcbiAgbGV0IG4gPSAwO1xuICB3aGlsZSAodHJ1ZSkge1xuICAgIGNvbnN0IGxvY2FsU2Vjb25kYXJ5SW5kZXhQcm9wczogTG9jYWxTZWNvbmRhcnlJbmRleFByb3BzID0ge1xuICAgICAgaW5kZXhOYW1lOiBgJHtMU0lfTkFNRX0ke259YCxcbiAgICAgIHNvcnRLZXk6IHsgbmFtZSA6IGAke0xTSV9TT1JUX0tFWS5uYW1lfSR7bn1gLCB0eXBlOiBMU0lfU09SVF9LRVkudHlwZSB9XG4gICAgfTtcbiAgICB5aWVsZCBsb2NhbFNlY29uZGFyeUluZGV4UHJvcHM7XG4gICAgbisrO1xuICB9XG59XG5cbmV4cG9ydCA9IHtcbiAgJ2RlZmF1bHQgcHJvcGVydGllcyc6IHtcbiAgICAnZmFpbHMgd2l0aG91dCBhIGhhc2gga2V5Jyh0ZXN0OiBUZXN0KSB7XG4gICAgICBjb25zdCBhcHAgPSBuZXcgVGVzdEFwcCgpO1xuICAgICAgbmV3IFRhYmxlKGFwcC5zdGFjaywgQ09OU1RSVUNUX05BTUUpO1xuICAgICAgdGVzdC50aHJvd3MoKCkgPT4gYXBwLnN5bnRoZXNpemVUZW1wbGF0ZSgpLCAvcGFydGl0aW9uIGtleS8pO1xuXG4gICAgICB0ZXN0LmRvbmUoKTtcbiAgICB9LFxuXG4gICAgJ2hhc2gga2V5IG9ubHknKHRlc3Q6IFRlc3QpIHtcbiAgICAgIGNvbnN0IGFwcCA9IG5ldyBUZXN0QXBwKCk7XG4gICAgICBuZXcgVGFibGUoYXBwLnN0YWNrLCBDT05TVFJVQ1RfTkFNRSkuYWRkUGFydGl0aW9uS2V5KFRBQkxFX1BBUlRJVElPTl9LRVkpO1xuICAgICAgY29uc3QgdGVtcGxhdGUgPSBhcHAuc3ludGhlc2l6ZVRlbXBsYXRlKCk7XG5cbiAgICAgIHRlc3QuZGVlcEVxdWFsKHRlbXBsYXRlLCB7XG4gICAgICAgIFJlc291cmNlczoge1xuICAgICAgICAgIE15VGFibGU3OTRFREVEMToge1xuICAgICAgICAgICAgVHlwZTogJ0FXUzo6RHluYW1vREI6OlRhYmxlJyxcbiAgICAgICAgICAgIFByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgQXR0cmlidXRlRGVmaW5pdGlvbnM6IFt7IEF0dHJpYnV0ZU5hbWU6ICdoYXNoS2V5JywgQXR0cmlidXRlVHlwZTogJ1MnIH1dLFxuICAgICAgICAgICAgICBLZXlTY2hlbWE6IFt7IEF0dHJpYnV0ZU5hbWU6ICdoYXNoS2V5JywgS2V5VHlwZTogJ0hBU0gnIH1dLFxuICAgICAgICAgICAgICBQcm92aXNpb25lZFRocm91Z2hwdXQ6IHsgUmVhZENhcGFjaXR5VW5pdHM6IDUsIFdyaXRlQ2FwYWNpdHlVbml0czogNSB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgdGVzdC5kb25lKCk7XG4gICAgfSxcblxuICAgICdoYXNoICsgcmFuZ2Uga2V5Jyh0ZXN0OiBUZXN0KSB7XG4gICAgICBjb25zdCBhcHAgPSBuZXcgVGVzdEFwcCgpO1xuICAgICAgbmV3IFRhYmxlKGFwcC5zdGFjaywgQ09OU1RSVUNUX05BTUUpXG4gICAgICAgIC5hZGRQYXJ0aXRpb25LZXkoVEFCTEVfUEFSVElUSU9OX0tFWSlcbiAgICAgICAgLmFkZFNvcnRLZXkoVEFCTEVfU09SVF9LRVkpO1xuICAgICAgY29uc3QgdGVtcGxhdGUgPSBhcHAuc3ludGhlc2l6ZVRlbXBsYXRlKCk7XG5cbiAgICAgIHRlc3QuZGVlcEVxdWFsKHRlbXBsYXRlLCB7XG4gICAgICAgIFJlc291cmNlczoge1xuICAgICAgICAgIE15VGFibGU3OTRFREVEMToge1xuICAgICAgICAgICAgVHlwZTogJ0FXUzo6RHluYW1vREI6OlRhYmxlJyxcbiAgICAgICAgICAgIFByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgQXR0cmlidXRlRGVmaW5pdGlvbnM6IFtcbiAgICAgICAgICAgICAgICB7IEF0dHJpYnV0ZU5hbWU6ICdoYXNoS2V5JywgQXR0cmlidXRlVHlwZTogJ1MnIH0sXG4gICAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnc29ydEtleScsIEF0dHJpYnV0ZVR5cGU6ICdOJyB9XG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIEtleVNjaGVtYTogW1xuICAgICAgICAgICAgICAgIHsgQXR0cmlidXRlTmFtZTogJ2hhc2hLZXknLCBLZXlUeXBlOiAnSEFTSCcgfSxcbiAgICAgICAgICAgICAgICB7IEF0dHJpYnV0ZU5hbWU6ICdzb3J0S2V5JywgS2V5VHlwZTogJ1JBTkdFJyB9XG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIFByb3Zpc2lvbmVkVGhyb3VnaHB1dDogeyBSZWFkQ2FwYWNpdHlVbml0czogNSwgV3JpdGVDYXBhY2l0eVVuaXRzOiA1IH0sXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgdGVzdC5kb25lKCk7XG4gICAgfSxcblxuICAgICdoYXNoICsgcmFuZ2Uga2V5IGNhbiBhbHNvIGJlIHNwZWNpZmllZCBpbiBwcm9wcycodGVzdDogVGVzdCkge1xuICAgICAgY29uc3QgYXBwID0gbmV3IFRlc3RBcHAoKTtcblxuICAgICAgbmV3IFRhYmxlKGFwcC5zdGFjaywgQ09OU1RSVUNUX05BTUUsIHtcbiAgICAgICAgcGFydGl0aW9uS2V5OiBUQUJMRV9QQVJUSVRJT05fS0VZLFxuICAgICAgICBzb3J0S2V5OiBUQUJMRV9TT1JUX0tFWVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHRlbXBsYXRlID0gYXBwLnN5bnRoZXNpemVUZW1wbGF0ZSgpO1xuXG4gICAgICB0ZXN0LmRlZXBFcXVhbCh0ZW1wbGF0ZSwge1xuICAgICAgICBSZXNvdXJjZXM6IHtcbiAgICAgICAgICBNeVRhYmxlNzk0RURFRDE6IHtcbiAgICAgICAgICAgIFR5cGU6ICdBV1M6OkR5bmFtb0RCOjpUYWJsZScsXG4gICAgICAgICAgICBQcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIEF0dHJpYnV0ZURlZmluaXRpb25zOiBbXG4gICAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnaGFzaEtleScsIEF0dHJpYnV0ZVR5cGU6ICdTJyB9LFxuICAgICAgICAgICAgICAgIHsgQXR0cmlidXRlTmFtZTogJ3NvcnRLZXknLCBBdHRyaWJ1dGVUeXBlOiAnTicgfVxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICBLZXlTY2hlbWE6IFtcbiAgICAgICAgICAgICAgICB7IEF0dHJpYnV0ZU5hbWU6ICdoYXNoS2V5JywgS2V5VHlwZTogJ0hBU0gnIH0sXG4gICAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnc29ydEtleScsIEtleVR5cGU6ICdSQU5HRScgfVxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICBQcm92aXNpb25lZFRocm91Z2hwdXQ6IHsgUmVhZENhcGFjaXR5VW5pdHM6IDUsIFdyaXRlQ2FwYWNpdHlVbml0czogNSB9LFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHRlc3QuZG9uZSgpO1xuICAgIH0sXG5cbiAgICAncG9pbnQtaW4tdGltZSByZWNvdmVyeSBpcyBub3QgZW5hYmxlZCcodGVzdDogVGVzdCkge1xuICAgICAgY29uc3QgYXBwID0gbmV3IFRlc3RBcHAoKTtcbiAgICAgIG5ldyBUYWJsZShhcHAuc3RhY2ssIENPTlNUUlVDVF9OQU1FKVxuICAgICAgICAuYWRkUGFydGl0aW9uS2V5KFRBQkxFX1BBUlRJVElPTl9LRVkpXG4gICAgICAgIC5hZGRTb3J0S2V5KFRBQkxFX1NPUlRfS0VZKTtcbiAgICAgIGNvbnN0IHRlbXBsYXRlID0gYXBwLnN5bnRoZXNpemVUZW1wbGF0ZSgpO1xuXG4gICAgICB0ZXN0LmRlZXBFcXVhbCh0ZW1wbGF0ZSwge1xuICAgICAgICBSZXNvdXJjZXM6IHtcbiAgICAgICAgICBNeVRhYmxlNzk0RURFRDE6IHtcbiAgICAgICAgICAgIFR5cGU6ICdBV1M6OkR5bmFtb0RCOjpUYWJsZScsXG4gICAgICAgICAgICBQcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIEF0dHJpYnV0ZURlZmluaXRpb25zOiBbXG4gICAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnaGFzaEtleScsIEF0dHJpYnV0ZVR5cGU6ICdTJyB9LFxuICAgICAgICAgICAgICAgIHsgQXR0cmlidXRlTmFtZTogJ3NvcnRLZXknLCBBdHRyaWJ1dGVUeXBlOiAnTicgfVxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICBLZXlTY2hlbWE6IFtcbiAgICAgICAgICAgICAgICB7IEF0dHJpYnV0ZU5hbWU6ICdoYXNoS2V5JywgS2V5VHlwZTogJ0hBU0gnIH0sXG4gICAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnc29ydEtleScsIEtleVR5cGU6ICdSQU5HRScgfVxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICBQcm92aXNpb25lZFRocm91Z2hwdXQ6IHsgUmVhZENhcGFjaXR5VW5pdHM6IDUsIFdyaXRlQ2FwYWNpdHlVbml0czogNSB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgdGVzdC5kb25lKCk7XG4gICAgfSxcblxuICAgICdzZXJ2ZXItc2lkZSBlbmNyeXB0aW9uIGlzIG5vdCBlbmFibGVkJyh0ZXN0OiBUZXN0KSB7XG4gICAgICBjb25zdCBhcHAgPSBuZXcgVGVzdEFwcCgpO1xuICAgICAgbmV3IFRhYmxlKGFwcC5zdGFjaywgQ09OU1RSVUNUX05BTUUpXG4gICAgICAgIC5hZGRQYXJ0aXRpb25LZXkoVEFCTEVfUEFSVElUSU9OX0tFWSlcbiAgICAgICAgLmFkZFNvcnRLZXkoVEFCTEVfU09SVF9LRVkpO1xuICAgICAgY29uc3QgdGVtcGxhdGUgPSBhcHAuc3ludGhlc2l6ZVRlbXBsYXRlKCk7XG5cbiAgICAgIHRlc3QuZGVlcEVxdWFsKHRlbXBsYXRlLCB7XG4gICAgICAgIFJlc291cmNlczoge1xuICAgICAgICAgIE15VGFibGU3OTRFREVEMToge1xuICAgICAgICAgICAgVHlwZTogJ0FXUzo6RHluYW1vREI6OlRhYmxlJyxcbiAgICAgICAgICAgIFByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgQXR0cmlidXRlRGVmaW5pdGlvbnM6IFtcbiAgICAgICAgICAgICAgICB7IEF0dHJpYnV0ZU5hbWU6ICdoYXNoS2V5JywgQXR0cmlidXRlVHlwZTogJ1MnIH0sXG4gICAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnc29ydEtleScsIEF0dHJpYnV0ZVR5cGU6ICdOJyB9XG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIEtleVNjaGVtYTogW1xuICAgICAgICAgICAgICAgIHsgQXR0cmlidXRlTmFtZTogJ2hhc2hLZXknLCBLZXlUeXBlOiAnSEFTSCcgfSxcbiAgICAgICAgICAgICAgICB7IEF0dHJpYnV0ZU5hbWU6ICdzb3J0S2V5JywgS2V5VHlwZTogJ1JBTkdFJyB9XG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIFByb3Zpc2lvbmVkVGhyb3VnaHB1dDogeyBSZWFkQ2FwYWNpdHlVbml0czogNSwgV3JpdGVDYXBhY2l0eVVuaXRzOiA1IH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0LmRvbmUoKTtcbiAgICB9LFxuXG4gICAgJ3N0cmVhbSBpcyBub3QgZW5hYmxlZCcodGVzdDogVGVzdCkge1xuICAgICAgY29uc3QgYXBwID0gbmV3IFRlc3RBcHAoKTtcbiAgICAgIG5ldyBUYWJsZShhcHAuc3RhY2ssIENPTlNUUlVDVF9OQU1FKVxuICAgICAgICAuYWRkUGFydGl0aW9uS2V5KFRBQkxFX1BBUlRJVElPTl9LRVkpXG4gICAgICAgIC5hZGRTb3J0S2V5KFRBQkxFX1NPUlRfS0VZKTtcbiAgICAgIGNvbnN0IHRlbXBsYXRlID0gYXBwLnN5bnRoZXNpemVUZW1wbGF0ZSgpO1xuXG4gICAgICB0ZXN0LmRlZXBFcXVhbCh0ZW1wbGF0ZSwge1xuICAgICAgICBSZXNvdXJjZXM6IHtcbiAgICAgICAgICBNeVRhYmxlNzk0RURFRDE6IHtcbiAgICAgICAgICAgIFR5cGU6ICdBV1M6OkR5bmFtb0RCOjpUYWJsZScsXG4gICAgICAgICAgICBQcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIEF0dHJpYnV0ZURlZmluaXRpb25zOiBbXG4gICAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnaGFzaEtleScsIEF0dHJpYnV0ZVR5cGU6ICdTJyB9LFxuICAgICAgICAgICAgICAgIHsgQXR0cmlidXRlTmFtZTogJ3NvcnRLZXknLCBBdHRyaWJ1dGVUeXBlOiAnTicgfVxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICBLZXlTY2hlbWE6IFtcbiAgICAgICAgICAgICAgICB7IEF0dHJpYnV0ZU5hbWU6ICdoYXNoS2V5JywgS2V5VHlwZTogJ0hBU0gnIH0sXG4gICAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnc29ydEtleScsIEtleVR5cGU6ICdSQU5HRScgfVxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICBQcm92aXNpb25lZFRocm91Z2hwdXQ6IHsgUmVhZENhcGFjaXR5VW5pdHM6IDUsIFdyaXRlQ2FwYWNpdHlVbml0czogNSB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgdGVzdC5kb25lKCk7XG4gICAgfSxcblxuICAgICd0dGwgaXMgbm90IGVuYWJsZWQnKHRlc3Q6IFRlc3QpIHtcbiAgICAgIGNvbnN0IGFwcCA9IG5ldyBUZXN0QXBwKCk7XG4gICAgICBuZXcgVGFibGUoYXBwLnN0YWNrLCBDT05TVFJVQ1RfTkFNRSlcbiAgICAgICAgLmFkZFBhcnRpdGlvbktleShUQUJMRV9QQVJUSVRJT05fS0VZKVxuICAgICAgICAuYWRkU29ydEtleShUQUJMRV9TT1JUX0tFWSk7XG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IGFwcC5zeW50aGVzaXplVGVtcGxhdGUoKTtcblxuICAgICAgdGVzdC5kZWVwRXF1YWwodGVtcGxhdGUsIHtcbiAgICAgICAgUmVzb3VyY2VzOiB7XG4gICAgICAgICAgTXlUYWJsZTc5NEVERUQxOiB7XG4gICAgICAgICAgICBUeXBlOiAnQVdTOjpEeW5hbW9EQjo6VGFibGUnLFxuICAgICAgICAgICAgUHJvcGVydGllczoge1xuICAgICAgICAgICAgICBBdHRyaWJ1dGVEZWZpbml0aW9uczogW1xuICAgICAgICAgICAgICAgIHsgQXR0cmlidXRlTmFtZTogJ2hhc2hLZXknLCBBdHRyaWJ1dGVUeXBlOiAnUycgfSxcbiAgICAgICAgICAgICAgICB7IEF0dHJpYnV0ZU5hbWU6ICdzb3J0S2V5JywgQXR0cmlidXRlVHlwZTogJ04nIH1cbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgS2V5U2NoZW1hOiBbXG4gICAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnaGFzaEtleScsIEtleVR5cGU6ICdIQVNIJyB9LFxuICAgICAgICAgICAgICAgIHsgQXR0cmlidXRlTmFtZTogJ3NvcnRLZXknLCBLZXlUeXBlOiAnUkFOR0UnIH1cbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgUHJvdmlzaW9uZWRUaHJvdWdocHV0OiB7IFJlYWRDYXBhY2l0eVVuaXRzOiA1LCBXcml0ZUNhcGFjaXR5VW5pdHM6IDUgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHRlc3QuZG9uZSgpO1xuICAgIH0sXG5cbiAgICAnY2FuIHNwZWNpZnkgbmV3IGFuZCBvbGQgaW1hZ2VzJyh0ZXN0OiBUZXN0KSB7XG4gICAgICBjb25zdCBhcHAgPSBuZXcgVGVzdEFwcCgpO1xuICAgICAgY29uc3QgdGFibGUgPSBuZXcgVGFibGUoYXBwLnN0YWNrLCBDT05TVFJVQ1RfTkFNRSwge1xuICAgICAgICB0YWJsZU5hbWU6IFRBQkxFX05BTUUsXG4gICAgICAgIHJlYWRDYXBhY2l0eTogNDIsXG4gICAgICAgIHdyaXRlQ2FwYWNpdHk6IDEzMzcsXG4gICAgICAgIHN0cmVhbVNwZWNpZmljYXRpb246IFN0cmVhbVZpZXdUeXBlLk5ld0FuZE9sZEltYWdlc1xuICAgICAgfSk7XG4gICAgICB0YWJsZS5hZGRQYXJ0aXRpb25LZXkoVEFCTEVfUEFSVElUSU9OX0tFWSk7XG4gICAgICB0YWJsZS5hZGRTb3J0S2V5KFRBQkxFX1NPUlRfS0VZKTtcbiAgICAgIGNvbnN0IHRlbXBsYXRlID0gYXBwLnN5bnRoZXNpemVUZW1wbGF0ZSgpO1xuXG4gICAgICB0ZXN0LmRlZXBFcXVhbCh0ZW1wbGF0ZSwge1xuICAgICAgICBSZXNvdXJjZXM6IHtcbiAgICAgICAgICBNeVRhYmxlNzk0RURFRDE6IHtcbiAgICAgICAgICAgIFR5cGU6ICdBV1M6OkR5bmFtb0RCOjpUYWJsZScsXG4gICAgICAgICAgICBQcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIEF0dHJpYnV0ZURlZmluaXRpb25zOiBbXG4gICAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnaGFzaEtleScsIEF0dHJpYnV0ZVR5cGU6ICdTJyB9LFxuICAgICAgICAgICAgICAgIHsgQXR0cmlidXRlTmFtZTogJ3NvcnRLZXknLCBBdHRyaWJ1dGVUeXBlOiAnTicgfVxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICBTdHJlYW1TcGVjaWZpY2F0aW9uOiB7IFN0cmVhbVZpZXdUeXBlOiAnTkVXX0FORF9PTERfSU1BR0VTJyB9LFxuICAgICAgICAgICAgICBLZXlTY2hlbWE6IFtcbiAgICAgICAgICAgICAgICB7IEF0dHJpYnV0ZU5hbWU6ICdoYXNoS2V5JywgS2V5VHlwZTogJ0hBU0gnIH0sXG4gICAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnc29ydEtleScsIEtleVR5cGU6ICdSQU5HRScgfVxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICBQcm92aXNpb25lZFRocm91Z2hwdXQ6IHsgUmVhZENhcGFjaXR5VW5pdHM6IDQyLCBXcml0ZUNhcGFjaXR5VW5pdHM6IDEzMzcgfSxcbiAgICAgICAgICAgICAgVGFibGVOYW1lOiAnTXlUYWJsZSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0LmRvbmUoKTtcbiAgICB9LFxuXG4gICAgJ2NhbiBzcGVjaWZ5IG5ldyBpbWFnZXMgb25seScodGVzdDogVGVzdCkge1xuICAgICAgY29uc3QgYXBwID0gbmV3IFRlc3RBcHAoKTtcbiAgICAgIGNvbnN0IHRhYmxlID0gbmV3IFRhYmxlKGFwcC5zdGFjaywgQ09OU1RSVUNUX05BTUUsIHtcbiAgICAgICAgdGFibGVOYW1lOiBUQUJMRV9OQU1FLFxuICAgICAgICByZWFkQ2FwYWNpdHk6IDQyLFxuICAgICAgICB3cml0ZUNhcGFjaXR5OiAxMzM3LFxuICAgICAgICBzdHJlYW1TcGVjaWZpY2F0aW9uOiBTdHJlYW1WaWV3VHlwZS5OZXdJbWFnZVxuICAgICAgfSk7XG4gICAgICB0YWJsZS5hZGRQYXJ0aXRpb25LZXkoVEFCTEVfUEFSVElUSU9OX0tFWSk7XG4gICAgICB0YWJsZS5hZGRTb3J0S2V5KFRBQkxFX1NPUlRfS0VZKTtcbiAgICAgIGNvbnN0IHRlbXBsYXRlID0gYXBwLnN5bnRoZXNpemVUZW1wbGF0ZSgpO1xuXG4gICAgICB0ZXN0LmRlZXBFcXVhbCh0ZW1wbGF0ZSwge1xuICAgICAgICBSZXNvdXJjZXM6IHtcbiAgICAgICAgICBNeVRhYmxlNzk0RURFRDE6IHtcbiAgICAgICAgICAgIFR5cGU6ICdBV1M6OkR5bmFtb0RCOjpUYWJsZScsXG4gICAgICAgICAgICBQcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIEtleVNjaGVtYTogW1xuICAgICAgICAgICAgICAgIHsgQXR0cmlidXRlTmFtZTogJ2hhc2hLZXknLCBLZXlUeXBlOiAnSEFTSCcgfSxcbiAgICAgICAgICAgICAgICB7IEF0dHJpYnV0ZU5hbWU6ICdzb3J0S2V5JywgS2V5VHlwZTogJ1JBTkdFJyB9XG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIFByb3Zpc2lvbmVkVGhyb3VnaHB1dDogeyBSZWFkQ2FwYWNpdHlVbml0czogNDIsIFdyaXRlQ2FwYWNpdHlVbml0czogMTMzNyB9LFxuICAgICAgICAgICAgICBBdHRyaWJ1dGVEZWZpbml0aW9uczogW1xuICAgICAgICAgICAgICAgIHsgQXR0cmlidXRlTmFtZTogJ2hhc2hLZXknLCBBdHRyaWJ1dGVUeXBlOiAnUycgfSxcbiAgICAgICAgICAgICAgICB7IEF0dHJpYnV0ZU5hbWU6ICdzb3J0S2V5JywgQXR0cmlidXRlVHlwZTogJ04nIH1cbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgU3RyZWFtU3BlY2lmaWNhdGlvbjogeyBTdHJlYW1WaWV3VHlwZTogJ05FV19JTUFHRScgfSxcbiAgICAgICAgICAgICAgVGFibGVOYW1lOiAnTXlUYWJsZScsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgdGVzdC5kb25lKCk7XG4gICAgfSxcblxuICAgICdjYW4gc3BlY2lmeSBvbGQgaW1hZ2VzIG9ubHknKHRlc3Q6IFRlc3QpIHtcbiAgICAgIGNvbnN0IGFwcCA9IG5ldyBUZXN0QXBwKCk7XG4gICAgICBjb25zdCB0YWJsZSA9IG5ldyBUYWJsZShhcHAuc3RhY2ssIENPTlNUUlVDVF9OQU1FLCB7XG4gICAgICAgIHRhYmxlTmFtZTogVEFCTEVfTkFNRSxcbiAgICAgICAgcmVhZENhcGFjaXR5OiA0MixcbiAgICAgICAgd3JpdGVDYXBhY2l0eTogMTMzNyxcbiAgICAgICAgc3RyZWFtU3BlY2lmaWNhdGlvbjogU3RyZWFtVmlld1R5cGUuT2xkSW1hZ2VcbiAgICAgIH0pO1xuICAgICAgdGFibGUuYWRkUGFydGl0aW9uS2V5KFRBQkxFX1BBUlRJVElPTl9LRVkpO1xuICAgICAgdGFibGUuYWRkU29ydEtleShUQUJMRV9TT1JUX0tFWSk7XG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IGFwcC5zeW50aGVzaXplVGVtcGxhdGUoKTtcblxuICAgICAgdGVzdC5kZWVwRXF1YWwodGVtcGxhdGUsIHtcbiAgICAgICAgUmVzb3VyY2VzOiB7XG4gICAgICAgICAgTXlUYWJsZTc5NEVERUQxOiB7XG4gICAgICAgICAgICBUeXBlOiAnQVdTOjpEeW5hbW9EQjo6VGFibGUnLFxuICAgICAgICAgICAgUHJvcGVydGllczoge1xuICAgICAgICAgICAgICBLZXlTY2hlbWE6IFtcbiAgICAgICAgICAgICAgICB7IEF0dHJpYnV0ZU5hbWU6ICdoYXNoS2V5JywgS2V5VHlwZTogJ0hBU0gnIH0sXG4gICAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnc29ydEtleScsIEtleVR5cGU6ICdSQU5HRScgfVxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICBQcm92aXNpb25lZFRocm91Z2hwdXQ6IHsgUmVhZENhcGFjaXR5VW5pdHM6IDQyLCBXcml0ZUNhcGFjaXR5VW5pdHM6IDEzMzcgfSxcbiAgICAgICAgICAgICAgQXR0cmlidXRlRGVmaW5pdGlvbnM6IFtcbiAgICAgICAgICAgICAgICB7IEF0dHJpYnV0ZU5hbWU6ICdoYXNoS2V5JywgQXR0cmlidXRlVHlwZTogJ1MnIH0sXG4gICAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnc29ydEtleScsIEF0dHJpYnV0ZVR5cGU6ICdOJyB9XG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIFN0cmVhbVNwZWNpZmljYXRpb246IHsgU3RyZWFtVmlld1R5cGU6ICdPTERfSU1BR0UnIH0sXG4gICAgICAgICAgICAgIFRhYmxlTmFtZTogJ015VGFibGUnLFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHRlc3QuZG9uZSgpO1xuICAgIH1cbiAgfSxcblxuICAnd2hlbiBzcGVjaWZ5aW5nIGV2ZXJ5IHByb3BlcnR5Jyh0ZXN0OiBUZXN0KSB7XG4gICAgY29uc3QgYXBwID0gbmV3IFRlc3RBcHAoKTtcbiAgICBjb25zdCB0YWJsZSA9IG5ldyBUYWJsZShhcHAuc3RhY2ssIENPTlNUUlVDVF9OQU1FLCB7XG4gICAgICB0YWJsZU5hbWU6IFRBQkxFX05BTUUsXG4gICAgICByZWFkQ2FwYWNpdHk6IDQyLFxuICAgICAgd3JpdGVDYXBhY2l0eTogMTMzNyxcbiAgICAgIHBpdHJFbmFibGVkOiB0cnVlLFxuICAgICAgc3NlRW5hYmxlZDogdHJ1ZSxcbiAgICAgIGJpbGxpbmdNb2RlOiBCaWxsaW5nTW9kZS5Qcm92aXNpb25lZCxcbiAgICAgIHN0cmVhbVNwZWNpZmljYXRpb246IFN0cmVhbVZpZXdUeXBlLktleXNPbmx5LFxuICAgICAgdGFnczogeyBFbnZpcm9ubWVudDogJ1Byb2R1Y3Rpb24nIH0sXG4gICAgICB0dGxBdHRyaWJ1dGVOYW1lOiAndGltZVRvTGl2ZSdcbiAgICB9KTtcbiAgICB0YWJsZS5hZGRQYXJ0aXRpb25LZXkoVEFCTEVfUEFSVElUSU9OX0tFWSk7XG4gICAgdGFibGUuYWRkU29ydEtleShUQUJMRV9TT1JUX0tFWSk7XG4gICAgY29uc3QgdGVtcGxhdGUgPSBhcHAuc3ludGhlc2l6ZVRlbXBsYXRlKCk7XG5cbiAgICB0ZXN0LmRlZXBFcXVhbCh0ZW1wbGF0ZSwge1xuICAgICAgUmVzb3VyY2VzOiB7XG4gICAgICAgIE15VGFibGU3OTRFREVEMToge1xuICAgICAgICAgIFR5cGU6ICdBV1M6OkR5bmFtb0RCOjpUYWJsZScsXG4gICAgICAgICAgUHJvcGVydGllczoge1xuICAgICAgICAgICAgQXR0cmlidXRlRGVmaW5pdGlvbnM6IFtcbiAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnaGFzaEtleScsIEF0dHJpYnV0ZVR5cGU6ICdTJyB9LFxuICAgICAgICAgICAgICB7IEF0dHJpYnV0ZU5hbWU6ICdzb3J0S2V5JywgQXR0cmlidXRlVHlwZTogJ04nIH1cbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBLZXlTY2hlbWE6IFtcbiAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnaGFzaEtleScsIEtleVR5cGU6ICdIQVNIJyB9LFxuICAgICAgICAgICAgICB7IEF0dHJpYnV0ZU5hbWU6ICdzb3J0S2V5JywgS2V5VHlwZTogJ1JBTkdFJyB9XG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgUHJvdmlzaW9uZWRUaHJvdWdocHV0OiB7XG4gICAgICAgICAgICAgIFJlYWRDYXBhY2l0eVVuaXRzOiA0MixcbiAgICAgICAgICAgICAgV3JpdGVDYXBhY2l0eVVuaXRzOiAxMzM3XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgUG9pbnRJblRpbWVSZWNvdmVyeVNwZWNpZmljYXRpb246IHsgUG9pbnRJblRpbWVSZWNvdmVyeUVuYWJsZWQ6IHRydWUgfSxcbiAgICAgICAgICAgIFNTRVNwZWNpZmljYXRpb246IHsgU1NFRW5hYmxlZDogdHJ1ZSB9LFxuICAgICAgICAgICAgU3RyZWFtU3BlY2lmaWNhdGlvbjogeyBTdHJlYW1WaWV3VHlwZTogJ0tFWVNfT05MWScgfSxcbiAgICAgICAgICAgIFRhYmxlTmFtZTogJ015VGFibGUnLFxuICAgICAgICAgICAgVGFnczogWyB7IEtleTogJ0Vudmlyb25tZW50JywgVmFsdWU6ICdQcm9kdWN0aW9uJyB9IF0sXG4gICAgICAgICAgICBUaW1lVG9MaXZlU3BlY2lmaWNhdGlvbjogeyBBdHRyaWJ1dGVOYW1lOiAndGltZVRvTGl2ZScsIEVuYWJsZWQ6IHRydWUgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGVzdC5kb25lKCk7XG4gIH0sXG5cbiAgJ3doZW4gc3BlY2lmeWluZyBQQVlfUEVSX1JFUVVFU1QgYmlsbGluZyBtb2RlJyh0ZXN0OiBUZXN0KSB7XG4gICAgY29uc3QgYXBwID0gbmV3IFRlc3RBcHAoKTtcbiAgICBuZXcgVGFibGUoYXBwLnN0YWNrLCBDT05TVFJVQ1RfTkFNRSwge1xuICAgICAgdGFibGVOYW1lOiBUQUJMRV9OQU1FLFxuICAgICAgYmlsbGluZ01vZGU6IEJpbGxpbmdNb2RlLlBheVBlclJlcXVlc3QsXG4gICAgICBwYXJ0aXRpb25LZXk6IFRBQkxFX1BBUlRJVElPTl9LRVlcbiAgICB9KTtcbiAgICBjb25zdCB0ZW1wbGF0ZSA9IGFwcC5zeW50aGVzaXplVGVtcGxhdGUoKTtcblxuICAgIHRlc3QuZGVlcEVxdWFsKHRlbXBsYXRlLCB7XG4gICAgICBSZXNvdXJjZXM6IHtcbiAgICAgICAgTXlUYWJsZTc5NEVERUQxOiB7XG4gICAgICAgICAgVHlwZTogJ0FXUzo6RHluYW1vREI6OlRhYmxlJyxcbiAgICAgICAgICBQcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICBLZXlTY2hlbWE6IFtcbiAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnaGFzaEtleScsIEtleVR5cGU6ICdIQVNIJyB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIEJpbGxpbmdNb2RlOiAnUEFZX1BFUl9SRVFVRVNUJyxcbiAgICAgICAgICAgIEF0dHJpYnV0ZURlZmluaXRpb25zOiBbXG4gICAgICAgICAgICAgIHsgQXR0cmlidXRlTmFtZTogJ2hhc2hLZXknLCBBdHRyaWJ1dGVUeXBlOiAnUycgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBUYWJsZU5hbWU6ICdNeVRhYmxlJyxcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRlc3QuZG9uZSgpO1xuICB9LFxuXG4gICdlcnJvciB3aGVuIHNwZWNpZnlpbmcgcmVhZCBvciB3cml0ZSBjYXBhY2l0eSB3aXRoIGEgUEFZX1BFUl9SRVFVRVNUIGJpbGxpbmcgbW9kZScodGVzdDogVGVzdCkge1xuICAgIGNvbnN0IGFwcCA9IG5ldyBUZXN0QXBwKCk7XG4gICAgdGVzdC50aHJvd3MoKCkgPT4gbmV3IFRhYmxlKGFwcC5zdGFjaywgQ09OU1RSVUNUX05BTUUsIHtcbiAgICAgIHRhYmxlTmFtZTogVEFCTEVfTkFNRSxcbiAgICAgIGJpbGxpbmdNb2RlOiBCaWxsaW5nTW9kZS5QYXlQZXJSZXF1ZXN0LFxuICAgICAgcGFydGl0aW9uS2V5OiBUQUJMRV9QQVJUSVRJT05fS0VZLFxuICAgICAgcmVhZENhcGFjaXR5OiAxXG4gICAgfSkpO1xuICAgIHRlc3QudGhyb3dzKCgpID0+IG5ldyBUYWJsZShhcHAuc3RhY2ssIENPTlNUUlVDVF9OQU1FLCB7XG4gICAgICB0YWJsZU5hbWU6IFRBQkxFX05BTUUsXG4gICAgICBiaWxsaW5nTW9kZTogQmlsbGluZ01vZGUuUGF5UGVyUmVxdWVzdCxcbiAgICAgIHBhcnRpdGlvbktleTogVEFCTEVfUEFSVElUSU9OX0tFWSxcbiAgICAgIHdyaXRlQ2FwYWNpdHk6IDFcbiAgICB9KSk7XG4gICAgdGVzdC50aHJvd3MoKCkgPT4gbmV3IFRhYmxlKGFwcC5zdGFjaywgQ09OU1RSVUNUX05BTUUsIHtcbiAgICAgIHRhYmxlTmFtZTogVEFCTEVfTkFNRSxcbiAgICAgIGJpbGxpbmdNb2RlOiBCaWxsaW5nTW9kZS5QYXlQZXJSZXF1ZXN0LFxuICAgICAgcGFydGl0aW9uS2V5OiBUQUJMRV9QQVJUSVRJT05fS0VZLFxuICAgICAgcmVhZENhcGFjaXR5OiAxLFxuICAgICAgd3JpdGVDYXBhY2l0eTogMVxuICAgIH0pKTtcbiAgICB0ZXN0LmRvbmUoKTtcbiAgfSxcblxuICAnd2hlbiBhZGRpbmcgYSBnbG9iYWwgc2Vjb25kYXJ5IGluZGV4IHdpdGggaGFzaCBrZXkgb25seScodGVzdDogVGVzdCkge1xuICAgIGNvbnN0IGFwcCA9IG5ldyBUZXN0QXBwKCk7XG4gICAgbmV3IFRhYmxlKGFwcC5zdGFjaywgQ09OU1RSVUNUX05BTUUpXG4gICAgICAuYWRkUGFydGl0aW9uS2V5KFRBQkxFX1BBUlRJVElPTl9LRVkpXG4gICAgICAuYWRkU29ydEtleShUQUJMRV9TT1JUX0tFWSlcbiAgICAgIC5hZGRHbG9iYWxTZWNvbmRhcnlJbmRleCh7XG4gICAgICAgIGluZGV4TmFtZTogR1NJX05BTUUsXG4gICAgICAgIHBhcnRpdGlvbktleTogR1NJX1BBUlRJVElPTl9LRVksXG4gICAgICAgIHJlYWRDYXBhY2l0eTogNDIsXG4gICAgICAgIHdyaXRlQ2FwYWNpdHk6IDEzMzdcbiAgICAgIH0pO1xuICAgIGNvbnN0IHRlbXBsYXRlID0gYXBwLnN5bnRoZXNpemVUZW1wbGF0ZSgpO1xuXG4gICAgdGVzdC5kZWVwRXF1YWwodGVtcGxhdGUsIHtcbiAgICAgIFJlc291cmNlczoge1xuICAgICAgICBNeVRhYmxlNzk0RURFRDE6IHtcbiAgICAgICAgICBUeXBlOiAnQVdTOjpEeW5hbW9EQjo6VGFibGUnLFxuICAgICAgICAgIFByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgIEF0dHJpYnV0ZURlZmluaXRpb25zOiBbXG4gICAgICAgICAgICAgIHsgQXR0cmlidXRlTmFtZTogJ2hhc2hLZXknLCBBdHRyaWJ1dGVUeXBlOiAnUycgfSxcbiAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnc29ydEtleScsIEF0dHJpYnV0ZVR5cGU6ICdOJyB9LFxuICAgICAgICAgICAgICB7IEF0dHJpYnV0ZU5hbWU6ICdnc2lIYXNoS2V5JywgQXR0cmlidXRlVHlwZTogJ1MnIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgS2V5U2NoZW1hOiBbXG4gICAgICAgICAgICAgIHsgQXR0cmlidXRlTmFtZTogJ2hhc2hLZXknLCBLZXlUeXBlOiAnSEFTSCcgfSxcbiAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnc29ydEtleScsIEtleVR5cGU6ICdSQU5HRScgfVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIFByb3Zpc2lvbmVkVGhyb3VnaHB1dDogeyBSZWFkQ2FwYWNpdHlVbml0czogNSwgV3JpdGVDYXBhY2l0eVVuaXRzOiA1IH0sXG4gICAgICAgICAgICBHbG9iYWxTZWNvbmRhcnlJbmRleGVzOiBbXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBJbmRleE5hbWU6ICdNeUdTSScsXG4gICAgICAgICAgICAgICAgS2V5U2NoZW1hOiBbXG4gICAgICAgICAgICAgICAgICB7IEF0dHJpYnV0ZU5hbWU6ICdnc2lIYXNoS2V5JywgS2V5VHlwZTogJ0hBU0gnIH0sXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBQcm9qZWN0aW9uOiB7IFByb2plY3Rpb25UeXBlOiAnQUxMJyB9LFxuICAgICAgICAgICAgICAgIFByb3Zpc2lvbmVkVGhyb3VnaHB1dDogeyBSZWFkQ2FwYWNpdHlVbml0czogNDIsIFdyaXRlQ2FwYWNpdHlVbml0czogMTMzNyB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRlc3QuZG9uZSgpO1xuICB9LFxuXG4gICd3aGVuIGFkZGluZyBhIGdsb2JhbCBzZWNvbmRhcnkgaW5kZXggd2l0aCBoYXNoICsgcmFuZ2Uga2V5Jyh0ZXN0OiBUZXN0KSB7XG4gICAgY29uc3QgYXBwID0gbmV3IFRlc3RBcHAoKTtcbiAgICBuZXcgVGFibGUoYXBwLnN0YWNrLCBDT05TVFJVQ1RfTkFNRSlcbiAgICAgIC5hZGRQYXJ0aXRpb25LZXkoVEFCTEVfUEFSVElUSU9OX0tFWSlcbiAgICAgIC5hZGRTb3J0S2V5KFRBQkxFX1NPUlRfS0VZKVxuICAgICAgLmFkZEdsb2JhbFNlY29uZGFyeUluZGV4KHtcbiAgICAgICAgaW5kZXhOYW1lOiBHU0lfTkFNRSxcbiAgICAgICAgcGFydGl0aW9uS2V5OiBHU0lfUEFSVElUSU9OX0tFWSxcbiAgICAgICAgc29ydEtleTogR1NJX1NPUlRfS0VZLFxuICAgICAgICBwcm9qZWN0aW9uVHlwZTogUHJvamVjdGlvblR5cGUuQWxsLFxuICAgICAgICByZWFkQ2FwYWNpdHk6IDQyLFxuICAgICAgICB3cml0ZUNhcGFjaXR5OiAxMzM3XG4gICAgICB9KTtcbiAgICBjb25zdCB0ZW1wbGF0ZSA9IGFwcC5zeW50aGVzaXplVGVtcGxhdGUoKTtcblxuICAgIHRlc3QuZGVlcEVxdWFsKHRlbXBsYXRlLCB7XG4gICAgICBSZXNvdXJjZXM6IHtcbiAgICAgICAgTXlUYWJsZTc5NEVERUQxOiB7XG4gICAgICAgICAgVHlwZTogJ0FXUzo6RHluYW1vREI6OlRhYmxlJyxcbiAgICAgICAgICBQcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICBBdHRyaWJ1dGVEZWZpbml0aW9uczogW1xuICAgICAgICAgICAgICB7IEF0dHJpYnV0ZU5hbWU6ICdoYXNoS2V5JywgQXR0cmlidXRlVHlwZTogJ1MnIH0sXG4gICAgICAgICAgICAgIHsgQXR0cmlidXRlTmFtZTogJ3NvcnRLZXknLCBBdHRyaWJ1dGVUeXBlOiAnTicgfSxcbiAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnZ3NpSGFzaEtleScsIEF0dHJpYnV0ZVR5cGU6ICdTJyB9LFxuICAgICAgICAgICAgICB7IEF0dHJpYnV0ZU5hbWU6ICdnc2lTb3J0S2V5JywgQXR0cmlidXRlVHlwZTogJ0InIH1cbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBLZXlTY2hlbWE6IFtcbiAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnaGFzaEtleScsIEtleVR5cGU6ICdIQVNIJyB9LFxuICAgICAgICAgICAgICB7IEF0dHJpYnV0ZU5hbWU6ICdzb3J0S2V5JywgS2V5VHlwZTogJ1JBTkdFJyB9XG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgUHJvdmlzaW9uZWRUaHJvdWdocHV0OiB7IFJlYWRDYXBhY2l0eVVuaXRzOiA1LCBXcml0ZUNhcGFjaXR5VW5pdHM6IDUgfSxcbiAgICAgICAgICAgIEdsb2JhbFNlY29uZGFyeUluZGV4ZXM6IFtcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIEluZGV4TmFtZTogJ015R1NJJyxcbiAgICAgICAgICAgICAgICBLZXlTY2hlbWE6IFtcbiAgICAgICAgICAgICAgICAgIHsgQXR0cmlidXRlTmFtZTogJ2dzaUhhc2hLZXknLCBLZXlUeXBlOiAnSEFTSCcgfSxcbiAgICAgICAgICAgICAgICAgIHsgQXR0cmlidXRlTmFtZTogJ2dzaVNvcnRLZXknLCBLZXlUeXBlOiAnUkFOR0UnIH1cbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIFByb2plY3Rpb246IHsgUHJvamVjdGlvblR5cGU6ICdBTEwnIH0sXG4gICAgICAgICAgICAgICAgUHJvdmlzaW9uZWRUaHJvdWdocHV0OiB7IFJlYWRDYXBhY2l0eVVuaXRzOiA0MiwgV3JpdGVDYXBhY2l0eVVuaXRzOiAxMzM3IH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGVzdC5kb25lKCk7XG4gIH0sXG5cbiAgJ3doZW4gYWRkaW5nIGEgZ2xvYmFsIHNlY29uZGFyeSBpbmRleCB3aXRoIHByb2plY3Rpb24gdHlwZSBLRVlTX09OTFknKHRlc3Q6IFRlc3QpIHtcbiAgICBjb25zdCBhcHAgPSBuZXcgVGVzdEFwcCgpO1xuICAgIG5ldyBUYWJsZShhcHAuc3RhY2ssIENPTlNUUlVDVF9OQU1FKVxuICAgICAgLmFkZFBhcnRpdGlvbktleShUQUJMRV9QQVJUSVRJT05fS0VZKVxuICAgICAgLmFkZFNvcnRLZXkoVEFCTEVfU09SVF9LRVkpXG4gICAgICAuYWRkR2xvYmFsU2Vjb25kYXJ5SW5kZXgoe1xuICAgICAgICBpbmRleE5hbWU6IEdTSV9OQU1FLFxuICAgICAgICBwYXJ0aXRpb25LZXk6IEdTSV9QQVJUSVRJT05fS0VZLFxuICAgICAgICBzb3J0S2V5OiBHU0lfU09SVF9LRVksXG4gICAgICAgIHByb2plY3Rpb25UeXBlOiBQcm9qZWN0aW9uVHlwZS5LZXlzT25seSxcbiAgICAgIH0pO1xuICAgIGNvbnN0IHRlbXBsYXRlID0gYXBwLnN5bnRoZXNpemVUZW1wbGF0ZSgpO1xuXG4gICAgdGVzdC5kZWVwRXF1YWwodGVtcGxhdGUsIHtcbiAgICAgIFJlc291cmNlczoge1xuICAgICAgICBNeVRhYmxlNzk0RURFRDE6IHtcbiAgICAgICAgICBUeXBlOiAnQVdTOjpEeW5hbW9EQjo6VGFibGUnLFxuICAgICAgICAgIFByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgIEF0dHJpYnV0ZURlZmluaXRpb25zOiBbXG4gICAgICAgICAgICAgIHsgQXR0cmlidXRlTmFtZTogJ2hhc2hLZXknLCBBdHRyaWJ1dGVUeXBlOiAnUycgfSxcbiAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnc29ydEtleScsIEF0dHJpYnV0ZVR5cGU6ICdOJyB9LFxuICAgICAgICAgICAgICB7IEF0dHJpYnV0ZU5hbWU6ICdnc2lIYXNoS2V5JywgQXR0cmlidXRlVHlwZTogJ1MnIH0sXG4gICAgICAgICAgICAgIHsgQXR0cmlidXRlTmFtZTogJ2dzaVNvcnRLZXknLCBBdHRyaWJ1dGVUeXBlOiAnQicgfVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIEtleVNjaGVtYTogW1xuICAgICAgICAgICAgICB7IEF0dHJpYnV0ZU5hbWU6ICdoYXNoS2V5JywgS2V5VHlwZTogJ0hBU0gnIH0sXG4gICAgICAgICAgICAgIHsgQXR0cmlidXRlTmFtZTogJ3NvcnRLZXknLCBLZXlUeXBlOiAnUkFOR0UnIH1cbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBQcm92aXNpb25lZFRocm91Z2hwdXQ6IHsgUmVhZENhcGFjaXR5VW5pdHM6IDUsIFdyaXRlQ2FwYWNpdHlVbml0czogNSB9LFxuICAgICAgICAgICAgR2xvYmFsU2Vjb25kYXJ5SW5kZXhlczogW1xuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgSW5kZXhOYW1lOiAnTXlHU0knLFxuICAgICAgICAgICAgICAgIEtleVNjaGVtYTogW1xuICAgICAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnZ3NpSGFzaEtleScsIEtleVR5cGU6ICdIQVNIJyB9LFxuICAgICAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnZ3NpU29ydEtleScsIEtleVR5cGU6ICdSQU5HRScgfVxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgUHJvamVjdGlvbjogeyBQcm9qZWN0aW9uVHlwZTogJ0tFWVNfT05MWScgfSxcbiAgICAgICAgICAgICAgICBQcm92aXNpb25lZFRocm91Z2hwdXQ6IHsgUmVhZENhcGFjaXR5VW5pdHM6IDUsIFdyaXRlQ2FwYWNpdHlVbml0czogNSB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRlc3QuZG9uZSgpO1xuICB9LFxuXG4gICd3aGVuIGFkZGluZyBhIGdsb2JhbCBzZWNvbmRhcnkgaW5kZXggd2l0aCBwcm9qZWN0aW9uIHR5cGUgSU5DTFVERScodGVzdDogVGVzdCkge1xuICAgIGNvbnN0IGFwcCA9IG5ldyBUZXN0QXBwKCk7XG4gICAgY29uc3QgdGFibGUgPSBuZXcgVGFibGUoYXBwLnN0YWNrLCBDT05TVFJVQ1RfTkFNRSlcbiAgICAgIC5hZGRQYXJ0aXRpb25LZXkoVEFCTEVfUEFSVElUSU9OX0tFWSlcbiAgICAgIC5hZGRTb3J0S2V5KFRBQkxFX1NPUlRfS0VZKTtcbiAgICBjb25zdCBnc2lOb25LZXlBdHRyaWJ1dGVHZW5lcmF0b3IgPSBOT05fS0VZX0FUVFJJQlVURV9HRU5FUkFUT1IoR1NJX05PTl9LRVkpO1xuICAgIHRhYmxlLmFkZEdsb2JhbFNlY29uZGFyeUluZGV4KHtcbiAgICAgIGluZGV4TmFtZTogR1NJX05BTUUsXG4gICAgICBwYXJ0aXRpb25LZXk6IEdTSV9QQVJUSVRJT05fS0VZLFxuICAgICAgc29ydEtleTogR1NJX1NPUlRfS0VZLFxuICAgICAgcHJvamVjdGlvblR5cGU6IFByb2plY3Rpb25UeXBlLkluY2x1ZGUsXG4gICAgICBub25LZXlBdHRyaWJ1dGVzOiBbZ3NpTm9uS2V5QXR0cmlidXRlR2VuZXJhdG9yLm5leHQoKS52YWx1ZSwgZ3NpTm9uS2V5QXR0cmlidXRlR2VuZXJhdG9yLm5leHQoKS52YWx1ZV0sXG4gICAgICByZWFkQ2FwYWNpdHk6IDQyLFxuICAgICAgd3JpdGVDYXBhY2l0eTogMTMzN1xuICAgIH0pO1xuICAgIGNvbnN0IHRlbXBsYXRlID0gYXBwLnN5bnRoZXNpemVUZW1wbGF0ZSgpO1xuXG4gICAgdGVzdC5kZWVwRXF1YWwodGVtcGxhdGUsIHtcbiAgICAgIFJlc291cmNlczoge1xuICAgICAgICBNeVRhYmxlNzk0RURFRDE6IHtcbiAgICAgICAgICBUeXBlOiAnQVdTOjpEeW5hbW9EQjo6VGFibGUnLFxuICAgICAgICAgIFByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgIEF0dHJpYnV0ZURlZmluaXRpb25zOiBbXG4gICAgICAgICAgICAgIHsgQXR0cmlidXRlTmFtZTogJ2hhc2hLZXknLCBBdHRyaWJ1dGVUeXBlOiAnUycgfSxcbiAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnc29ydEtleScsIEF0dHJpYnV0ZVR5cGU6ICdOJyB9LFxuICAgICAgICAgICAgICB7IEF0dHJpYnV0ZU5hbWU6ICdnc2lIYXNoS2V5JywgQXR0cmlidXRlVHlwZTogJ1MnIH0sXG4gICAgICAgICAgICAgIHsgQXR0cmlidXRlTmFtZTogJ2dzaVNvcnRLZXknLCBBdHRyaWJ1dGVUeXBlOiAnQicgfVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIEtleVNjaGVtYTogW1xuICAgICAgICAgICAgICB7IEF0dHJpYnV0ZU5hbWU6ICdoYXNoS2V5JywgS2V5VHlwZTogJ0hBU0gnIH0sXG4gICAgICAgICAgICAgIHsgQXR0cmlidXRlTmFtZTogJ3NvcnRLZXknLCBLZXlUeXBlOiAnUkFOR0UnIH1cbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBQcm92aXNpb25lZFRocm91Z2hwdXQ6IHsgUmVhZENhcGFjaXR5VW5pdHM6IDUsIFdyaXRlQ2FwYWNpdHlVbml0czogNSB9LFxuICAgICAgICAgICAgR2xvYmFsU2Vjb25kYXJ5SW5kZXhlczogW1xuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgSW5kZXhOYW1lOiAnTXlHU0knLFxuICAgICAgICAgICAgICAgIEtleVNjaGVtYTogW1xuICAgICAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnZ3NpSGFzaEtleScsIEtleVR5cGU6ICdIQVNIJyB9LFxuICAgICAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnZ3NpU29ydEtleScsIEtleVR5cGU6ICdSQU5HRScgfVxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgUHJvamVjdGlvbjogeyBOb25LZXlBdHRyaWJ1dGVzOiBbJ2dzaU5vbktleTAnLCAnZ3NpTm9uS2V5MSddLCBQcm9qZWN0aW9uVHlwZTogJ0lOQ0xVREUnIH0sXG4gICAgICAgICAgICAgICAgUHJvdmlzaW9uZWRUaHJvdWdocHV0OiB7IFJlYWRDYXBhY2l0eVVuaXRzOiA0MiwgV3JpdGVDYXBhY2l0eVVuaXRzOiAxMzM3IH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGVzdC5kb25lKCk7XG4gIH0sXG5cbiAgJ3doZW4gYWRkaW5nIGEgZ2xvYmFsIHNlY29uZGFyeSBpbmRleCBvbiBhIHRhYmxlIHdpdGggUEFZX1BFUl9SRVFVRVNUIGJpbGxpbmcgbW9kZScodGVzdDogVGVzdCkge1xuICAgIGNvbnN0IGFwcCA9IG5ldyBUZXN0QXBwKCk7XG4gICAgbmV3IFRhYmxlKGFwcC5zdGFjaywgQ09OU1RSVUNUX05BTUUsIHtcbiAgICAgIGJpbGxpbmdNb2RlOiBCaWxsaW5nTW9kZS5QYXlQZXJSZXF1ZXN0LFxuICAgICAgcGFydGl0aW9uS2V5OiBUQUJMRV9QQVJUSVRJT05fS0VZLFxuICAgICAgc29ydEtleTogVEFCTEVfU09SVF9LRVlcbiAgICB9KS5hZGRHbG9iYWxTZWNvbmRhcnlJbmRleCh7XG4gICAgICBpbmRleE5hbWU6IEdTSV9OQU1FLFxuICAgICAgcGFydGl0aW9uS2V5OiBHU0lfUEFSVElUSU9OX0tFWSxcbiAgICB9KTtcbiAgICBjb25zdCB0ZW1wbGF0ZSA9IGFwcC5zeW50aGVzaXplVGVtcGxhdGUoKTtcblxuICAgIHRlc3QuZGVlcEVxdWFsKHRlbXBsYXRlLCB7XG4gICAgICBSZXNvdXJjZXM6IHtcbiAgICAgICAgTXlUYWJsZTc5NEVERUQxOiB7XG4gICAgICAgICAgVHlwZTogJ0FXUzo6RHluYW1vREI6OlRhYmxlJyxcbiAgICAgICAgICBQcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICBBdHRyaWJ1dGVEZWZpbml0aW9uczogW1xuICAgICAgICAgICAgICB7IEF0dHJpYnV0ZU5hbWU6ICdoYXNoS2V5JywgQXR0cmlidXRlVHlwZTogJ1MnIH0sXG4gICAgICAgICAgICAgIHsgQXR0cmlidXRlTmFtZTogJ3NvcnRLZXknLCBBdHRyaWJ1dGVUeXBlOiAnTicgfSxcbiAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnZ3NpSGFzaEtleScsIEF0dHJpYnV0ZVR5cGU6ICdTJyB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIEJpbGxpbmdNb2RlOiAnUEFZX1BFUl9SRVFVRVNUJyxcbiAgICAgICAgICAgIEtleVNjaGVtYTogW1xuICAgICAgICAgICAgICB7IEF0dHJpYnV0ZU5hbWU6ICdoYXNoS2V5JywgS2V5VHlwZTogJ0hBU0gnIH0sXG4gICAgICAgICAgICAgIHsgQXR0cmlidXRlTmFtZTogJ3NvcnRLZXknLCBLZXlUeXBlOiAnUkFOR0UnIH1cbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBHbG9iYWxTZWNvbmRhcnlJbmRleGVzOiBbXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBJbmRleE5hbWU6ICdNeUdTSScsXG4gICAgICAgICAgICAgICAgS2V5U2NoZW1hOiBbXG4gICAgICAgICAgICAgICAgICB7IEF0dHJpYnV0ZU5hbWU6ICdnc2lIYXNoS2V5JywgS2V5VHlwZTogJ0hBU0gnIH0sXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBQcm9qZWN0aW9uOiB7IFByb2plY3Rpb25UeXBlOiAnQUxMJyB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRlc3QuZG9uZSgpO1xuICB9LFxuXG4gICdlcnJvciB3aGVuIGFkZGluZyBhIGdsb2JhbCBzZWNvbmRhcnkgaW5kZXggd2l0aCBwcm9qZWN0aW9uIHR5cGUgSU5DTFVERSwgYnV0IHdpdGhvdXQgc3BlY2lmeWluZyBub24ta2V5IGF0dHJpYnV0ZXMnKHRlc3Q6IFRlc3QpIHtcbiAgICBjb25zdCBhcHAgPSBuZXcgVGVzdEFwcCgpO1xuICAgIGNvbnN0IHRhYmxlID0gbmV3IFRhYmxlKGFwcC5zdGFjaywgQ09OU1RSVUNUX05BTUUpXG4gICAgICAuYWRkUGFydGl0aW9uS2V5KFRBQkxFX1BBUlRJVElPTl9LRVkpXG4gICAgICAuYWRkU29ydEtleShUQUJMRV9TT1JUX0tFWSk7XG5cbiAgICB0ZXN0LnRocm93cygoKSA9PiB0YWJsZS5hZGRHbG9iYWxTZWNvbmRhcnlJbmRleCh7XG4gICAgICBpbmRleE5hbWU6IEdTSV9OQU1FLFxuICAgICAgcGFydGl0aW9uS2V5OiBHU0lfUEFSVElUSU9OX0tFWSxcbiAgICAgIHNvcnRLZXk6IEdTSV9TT1JUX0tFWSxcbiAgICAgIHByb2plY3Rpb25UeXBlOiBQcm9qZWN0aW9uVHlwZS5JbmNsdWRlXG4gICAgfSksIC9ub24ta2V5IGF0dHJpYnV0ZXMgc2hvdWxkIGJlIHNwZWNpZmllZCB3aGVuIHVzaW5nIElOQ0xVREUgcHJvamVjdGlvbiB0eXBlLyk7XG5cbiAgICB0ZXN0LmRvbmUoKTtcbiAgfSxcblxuICAnZXJyb3Igd2hlbiBhZGRpbmcgYSBnbG9iYWwgc2Vjb25kYXJ5IGluZGV4IHdpdGggcHJvamVjdGlvbiB0eXBlIEFMTCwgYnV0IHdpdGggbm9uLWtleSBhdHRyaWJ1dGVzJyh0ZXN0OiBUZXN0KSB7XG4gICAgY29uc3QgYXBwID0gbmV3IFRlc3RBcHAoKTtcbiAgICBjb25zdCB0YWJsZSA9IG5ldyBUYWJsZShhcHAuc3RhY2ssIENPTlNUUlVDVF9OQU1FKVxuICAgICAgLmFkZFBhcnRpdGlvbktleShUQUJMRV9QQVJUSVRJT05fS0VZKVxuICAgICAgLmFkZFNvcnRLZXkoVEFCTEVfU09SVF9LRVkpO1xuICAgIGNvbnN0IGdzaU5vbktleUF0dHJpYnV0ZUdlbmVyYXRvciA9IE5PTl9LRVlfQVRUUklCVVRFX0dFTkVSQVRPUihHU0lfTk9OX0tFWSk7XG5cbiAgICB0ZXN0LnRocm93cygoKSA9PiB0YWJsZS5hZGRHbG9iYWxTZWNvbmRhcnlJbmRleCh7XG4gICAgICBpbmRleE5hbWU6IEdTSV9OQU1FLFxuICAgICAgcGFydGl0aW9uS2V5OiBHU0lfUEFSVElUSU9OX0tFWSxcbiAgICAgIG5vbktleUF0dHJpYnV0ZXM6IFtnc2lOb25LZXlBdHRyaWJ1dGVHZW5lcmF0b3IubmV4dCgpLnZhbHVlXVxuICAgIH0pLCAvbm9uLWtleSBhdHRyaWJ1dGVzIHNob3VsZCBub3QgYmUgc3BlY2lmaWVkIHdoZW4gbm90IHVzaW5nIElOQ0xVREUgcHJvamVjdGlvbiB0eXBlLyk7XG5cbiAgICB0ZXN0LmRvbmUoKTtcbiAgfSxcblxuICAnZXJyb3Igd2hlbiBhZGRpbmcgYSBnbG9iYWwgc2Vjb25kYXJ5IGluZGV4IHdpdGggcHJvamVjdGlvbiB0eXBlIEtFWVNfT05MWSwgYnV0IHdpdGggbm9uLWtleSBhdHRyaWJ1dGVzJyh0ZXN0OiBUZXN0KSB7XG4gICAgY29uc3QgYXBwID0gbmV3IFRlc3RBcHAoKTtcbiAgICBjb25zdCB0YWJsZSA9IG5ldyBUYWJsZShhcHAuc3RhY2ssIENPTlNUUlVDVF9OQU1FKVxuICAgICAgLmFkZFBhcnRpdGlvbktleShUQUJMRV9QQVJUSVRJT05fS0VZKVxuICAgICAgLmFkZFNvcnRLZXkoVEFCTEVfU09SVF9LRVkpO1xuICAgIGNvbnN0IGdzaU5vbktleUF0dHJpYnV0ZUdlbmVyYXRvciA9IE5PTl9LRVlfQVRUUklCVVRFX0dFTkVSQVRPUihHU0lfTk9OX0tFWSk7XG5cbiAgICB0ZXN0LnRocm93cygoKSA9PiB0YWJsZS5hZGRHbG9iYWxTZWNvbmRhcnlJbmRleCh7XG4gICAgICBpbmRleE5hbWU6IEdTSV9OQU1FLFxuICAgICAgcGFydGl0aW9uS2V5OiBHU0lfUEFSVElUSU9OX0tFWSxcbiAgICAgIHByb2plY3Rpb25UeXBlOiBQcm9qZWN0aW9uVHlwZS5LZXlzT25seSxcbiAgICAgIG5vbktleUF0dHJpYnV0ZXM6IFtnc2lOb25LZXlBdHRyaWJ1dGVHZW5lcmF0b3IubmV4dCgpLnZhbHVlXVxuICAgIH0pLCAvbm9uLWtleSBhdHRyaWJ1dGVzIHNob3VsZCBub3QgYmUgc3BlY2lmaWVkIHdoZW4gbm90IHVzaW5nIElOQ0xVREUgcHJvamVjdGlvbiB0eXBlLyk7XG5cbiAgICB0ZXN0LmRvbmUoKTtcbiAgfSxcblxuICAnZXJyb3Igd2hlbiBhZGRpbmcgYSBnbG9iYWwgc2Vjb25kYXJ5IGluZGV4IHdpdGggcHJvamVjdGlvbiB0eXBlIElOQ0xVREUsIGJ1dCB3aXRoIG1vcmUgdGhhbiAyMCBub24ta2V5IGF0dHJpYnV0ZXMnKHRlc3Q6IFRlc3QpIHtcbiAgICBjb25zdCBhcHAgPSBuZXcgVGVzdEFwcCgpO1xuICAgIGNvbnN0IHRhYmxlID0gbmV3IFRhYmxlKGFwcC5zdGFjaywgQ09OU1RSVUNUX05BTUUpXG4gICAgICAuYWRkUGFydGl0aW9uS2V5KFRBQkxFX1BBUlRJVElPTl9LRVkpXG4gICAgICAuYWRkU29ydEtleShUQUJMRV9TT1JUX0tFWSk7XG4gICAgY29uc3QgZ3NpTm9uS2V5QXR0cmlidXRlR2VuZXJhdG9yID0gTk9OX0tFWV9BVFRSSUJVVEVfR0VORVJBVE9SKEdTSV9OT05fS0VZKTtcbiAgICBjb25zdCBnc2lOb25LZXlBdHRyaWJ1dGVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjE7IGkrKykge1xuICAgICAgZ3NpTm9uS2V5QXR0cmlidXRlcy5wdXNoKGdzaU5vbktleUF0dHJpYnV0ZUdlbmVyYXRvci5uZXh0KCkudmFsdWUpO1xuICAgIH1cblxuICAgIHRlc3QudGhyb3dzKCgpID0+IHRhYmxlLmFkZEdsb2JhbFNlY29uZGFyeUluZGV4KHtcbiAgICAgIGluZGV4TmFtZTogR1NJX05BTUUsXG4gICAgICBwYXJ0aXRpb25LZXk6IEdTSV9QQVJUSVRJT05fS0VZLFxuICAgICAgc29ydEtleTogR1NJX1NPUlRfS0VZLFxuICAgICAgcHJvamVjdGlvblR5cGU6IFByb2plY3Rpb25UeXBlLkluY2x1ZGUsXG4gICAgICBub25LZXlBdHRyaWJ1dGVzOiBnc2lOb25LZXlBdHRyaWJ1dGVzXG4gICAgfSksIC9hIG1heGltdW0gbnVtYmVyIG9mIG5vbktleUF0dHJpYnV0ZXMgYWNyb3NzIGFsbCBvZiBzZWNvbmRhcnkgaW5kZXhlcyBpcyAyMC8pO1xuXG4gICAgdGVzdC5kb25lKCk7XG4gIH0sXG5cbiAgJ2Vycm9yIHdoZW4gYWRkaW5nIGEgZ2xvYmFsIHNlY29uZGFyeSBpbmRleCB3aXRoIHByb2plY3Rpb24gdHlwZSBJTkNMVURFLCBidXQgd2l0aCBrZXkgYXR0cmlidXRlcycodGVzdDogVGVzdCkge1xuICAgIGNvbnN0IGFwcCA9IG5ldyBUZXN0QXBwKCk7XG4gICAgY29uc3QgdGFibGUgPSBuZXcgVGFibGUoYXBwLnN0YWNrLCBDT05TVFJVQ1RfTkFNRSlcbiAgICAgIC5hZGRQYXJ0aXRpb25LZXkoVEFCTEVfUEFSVElUSU9OX0tFWSlcbiAgICAgIC5hZGRTb3J0S2V5KFRBQkxFX1NPUlRfS0VZKTtcblxuICAgIHRlc3QudGhyb3dzKCgpID0+IHRhYmxlLmFkZEdsb2JhbFNlY29uZGFyeUluZGV4KHtcbiAgICAgIGluZGV4TmFtZTogR1NJX05BTUUsXG4gICAgICBwYXJ0aXRpb25LZXk6IEdTSV9QQVJUSVRJT05fS0VZLFxuICAgICAgc29ydEtleTogR1NJX1NPUlRfS0VZLFxuICAgICAgcHJvamVjdGlvblR5cGU6IFByb2plY3Rpb25UeXBlLkluY2x1ZGUsXG4gICAgICBub25LZXlBdHRyaWJ1dGVzOiBbR1NJX05PTl9LRVksIFRBQkxFX1BBUlRJVElPTl9LRVkubmFtZV1cbiAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtbGluZS1sZW5ndGhcbiAgICB9KSwgL2Ega2V5IGF0dHJpYnV0ZSwgaGFzaEtleSwgaXMgcGFydCBvZiBhIGxpc3Qgb2Ygbm9uLWtleSBhdHRyaWJ1dGVzLCBnc2lOb25LZXksaGFzaEtleSwgd2hpY2ggaXMgbm90IGFsbG93ZWQgc2luY2UgYWxsIGtleSBhdHRyaWJ1dGVzIGFyZSBhZGRlZCBhdXRvbWF0aWNhbGx5IGFuZCB0aGlzIGNvbmZpZ3VyYXRpb24gY2F1c2VzIHN0YWNrIGNyZWF0aW9uIGZhaWx1cmUvKTtcblxuICAgIHRlc3QuZG9uZSgpO1xuICB9LFxuXG4gICdlcnJvciB3aGVuIGFkZGluZyBhIGdsb2JhbCBzZWNvbmRhcnkgaW5kZXggd2l0aCByZWFkIG9yIHdyaXRlIGNhcGFjaXR5IG9uIGEgUEFZX1BFUl9SRVFVRVNUIHRhYmxlJyh0ZXN0OiBUZXN0KSB7XG4gICAgY29uc3QgYXBwID0gbmV3IFRlc3RBcHAoKTtcbiAgICBjb25zdCB0YWJsZSA9IG5ldyBUYWJsZShhcHAuc3RhY2ssIENPTlNUUlVDVF9OQU1FLCB7XG4gICAgICBwYXJ0aXRpb25LZXk6IFRBQkxFX1BBUlRJVElPTl9LRVksXG4gICAgICBiaWxsaW5nTW9kZTogQmlsbGluZ01vZGUuUGF5UGVyUmVxdWVzdFxuICAgIH0pO1xuXG4gICAgdGVzdC50aHJvd3MoKCkgPT4gdGFibGUuYWRkR2xvYmFsU2Vjb25kYXJ5SW5kZXgoe1xuICAgICAgaW5kZXhOYW1lOiBHU0lfTkFNRSxcbiAgICAgIHBhcnRpdGlvbktleTogR1NJX1BBUlRJVElPTl9LRVksXG4gICAgICBzb3J0S2V5OiBHU0lfU09SVF9LRVksXG4gICAgICByZWFkQ2FwYWNpdHk6IDFcbiAgICB9KSk7XG4gICAgdGVzdC50aHJvd3MoKCkgPT4gdGFibGUuYWRkR2xvYmFsU2Vjb25kYXJ5SW5kZXgoe1xuICAgICAgaW5kZXhOYW1lOiBHU0lfTkFNRSxcbiAgICAgIHBhcnRpdGlvbktleTogR1NJX1BBUlRJVElPTl9LRVksXG4gICAgICBzb3J0S2V5OiBHU0lfU09SVF9LRVksXG4gICAgICB3cml0ZUNhcGFjaXR5OiAxXG4gICAgfSkpO1xuICAgIHRlc3QudGhyb3dzKCgpID0+IHRhYmxlLmFkZEdsb2JhbFNlY29uZGFyeUluZGV4KHtcbiAgICAgIGluZGV4TmFtZTogR1NJX05BTUUsXG4gICAgICBwYXJ0aXRpb25LZXk6IEdTSV9QQVJUSVRJT05fS0VZLFxuICAgICAgc29ydEtleTogR1NJX1NPUlRfS0VZLFxuICAgICAgcmVhZENhcGFjaXR5OiAxLFxuICAgICAgd3JpdGVDYXBhY2l0eTogMVxuICAgIH0pKTtcblxuICAgIHRlc3QuZG9uZSgpO1xuICB9LFxuXG4gICd3aGVuIGFkZGluZyBtdWx0aXBsZSBnbG9iYWwgc2Vjb25kYXJ5IGluZGV4ZXMnKHRlc3Q6IFRlc3QpIHtcbiAgICBjb25zdCBhcHAgPSBuZXcgVGVzdEFwcCgpO1xuICAgIGNvbnN0IHRhYmxlID0gbmV3IFRhYmxlKGFwcC5zdGFjaywgQ09OU1RSVUNUX05BTUUpXG4gICAgICAuYWRkUGFydGl0aW9uS2V5KFRBQkxFX1BBUlRJVElPTl9LRVkpXG4gICAgICAuYWRkU29ydEtleShUQUJMRV9TT1JUX0tFWSk7XG4gICAgY29uc3QgZ3NpR2VuZXJhdG9yID0gR1NJX0dFTkVSQVRPUigpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKSB7XG4gICAgICB0YWJsZS5hZGRHbG9iYWxTZWNvbmRhcnlJbmRleChnc2lHZW5lcmF0b3IubmV4dCgpLnZhbHVlKTtcbiAgICB9XG4gICAgY29uc3QgdGVtcGxhdGUgPSBhcHAuc3ludGhlc2l6ZVRlbXBsYXRlKCk7XG5cbiAgICB0ZXN0LmRlZXBFcXVhbCh0ZW1wbGF0ZSwge1xuICAgICAgUmVzb3VyY2VzOiB7XG4gICAgICAgIE15VGFibGU3OTRFREVEMToge1xuICAgICAgICAgIFR5cGU6ICdBV1M6OkR5bmFtb0RCOjpUYWJsZScsXG4gICAgICAgICAgUHJvcGVydGllczoge1xuICAgICAgICAgICAgQXR0cmlidXRlRGVmaW5pdGlvbnM6IFtcbiAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnaGFzaEtleScsIEF0dHJpYnV0ZVR5cGU6ICdTJyB9LFxuICAgICAgICAgICAgICB7IEF0dHJpYnV0ZU5hbWU6ICdzb3J0S2V5JywgQXR0cmlidXRlVHlwZTogJ04nIH0sXG4gICAgICAgICAgICAgIHsgQXR0cmlidXRlTmFtZTogJ2dzaUhhc2hLZXkwJywgQXR0cmlidXRlVHlwZTogJ1MnIH0sXG4gICAgICAgICAgICAgIHsgQXR0cmlidXRlTmFtZTogJ2dzaUhhc2hLZXkxJywgQXR0cmlidXRlVHlwZTogJ1MnIH0sXG4gICAgICAgICAgICAgIHsgQXR0cmlidXRlTmFtZTogJ2dzaUhhc2hLZXkyJywgQXR0cmlidXRlVHlwZTogJ1MnIH0sXG4gICAgICAgICAgICAgIHsgQXR0cmlidXRlTmFtZTogJ2dzaUhhc2hLZXkzJywgQXR0cmlidXRlVHlwZTogJ1MnIH0sXG4gICAgICAgICAgICAgIHsgQXR0cmlidXRlTmFtZTogJ2dzaUhhc2hLZXk0JywgQXR0cmlidXRlVHlwZTogJ1MnIH1cbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBLZXlTY2hlbWE6IFtcbiAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnaGFzaEtleScsIEtleVR5cGU6ICdIQVNIJyB9LFxuICAgICAgICAgICAgICB7IEF0dHJpYnV0ZU5hbWU6ICdzb3J0S2V5JywgS2V5VHlwZTogJ1JBTkdFJyB9XG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgUHJvdmlzaW9uZWRUaHJvdWdocHV0OiB7IFJlYWRDYXBhY2l0eVVuaXRzOiA1LCBXcml0ZUNhcGFjaXR5VW5pdHM6IDUgfSxcbiAgICAgICAgICAgIEdsb2JhbFNlY29uZGFyeUluZGV4ZXM6IFtcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIEluZGV4TmFtZTogJ015R1NJMCcsXG4gICAgICAgICAgICAgICAgS2V5U2NoZW1hOiBbXG4gICAgICAgICAgICAgICAgICB7IEF0dHJpYnV0ZU5hbWU6ICdnc2lIYXNoS2V5MCcsIEtleVR5cGU6ICdIQVNIJyB9LFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgUHJvamVjdGlvbjogeyBQcm9qZWN0aW9uVHlwZTogJ0FMTCcgfSxcbiAgICAgICAgICAgICAgICBQcm92aXNpb25lZFRocm91Z2hwdXQ6IHsgUmVhZENhcGFjaXR5VW5pdHM6IDUsIFdyaXRlQ2FwYWNpdHlVbml0czogNSB9XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBJbmRleE5hbWU6ICdNeUdTSTEnLFxuICAgICAgICAgICAgICAgIEtleVNjaGVtYTogW1xuICAgICAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnZ3NpSGFzaEtleTEnLCBLZXlUeXBlOiAnSEFTSCcgfSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIFByb2plY3Rpb246IHsgUHJvamVjdGlvblR5cGU6ICdBTEwnIH0sXG4gICAgICAgICAgICAgICAgUHJvdmlzaW9uZWRUaHJvdWdocHV0OiB7IFJlYWRDYXBhY2l0eVVuaXRzOiA1LCBXcml0ZUNhcGFjaXR5VW5pdHM6IDUgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgSW5kZXhOYW1lOiAnTXlHU0kyJyxcbiAgICAgICAgICAgICAgICBLZXlTY2hlbWE6IFtcbiAgICAgICAgICAgICAgICAgIHsgQXR0cmlidXRlTmFtZTogJ2dzaUhhc2hLZXkyJywgS2V5VHlwZTogJ0hBU0gnIH0sXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBQcm9qZWN0aW9uOiB7IFByb2plY3Rpb25UeXBlOiAnQUxMJyB9LFxuICAgICAgICAgICAgICAgIFByb3Zpc2lvbmVkVGhyb3VnaHB1dDogeyBSZWFkQ2FwYWNpdHlVbml0czogNSwgV3JpdGVDYXBhY2l0eVVuaXRzOiA1IH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIEluZGV4TmFtZTogJ015R1NJMycsXG4gICAgICAgICAgICAgICAgS2V5U2NoZW1hOiBbXG4gICAgICAgICAgICAgICAgICB7IEF0dHJpYnV0ZU5hbWU6ICdnc2lIYXNoS2V5MycsIEtleVR5cGU6ICdIQVNIJyB9LFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgUHJvamVjdGlvbjogeyBQcm9qZWN0aW9uVHlwZTogJ0FMTCcgfSxcbiAgICAgICAgICAgICAgICBQcm92aXNpb25lZFRocm91Z2hwdXQ6IHsgUmVhZENhcGFjaXR5VW5pdHM6IDUsIFdyaXRlQ2FwYWNpdHlVbml0czogNSB9XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBJbmRleE5hbWU6ICdNeUdTSTQnLFxuICAgICAgICAgICAgICAgIEtleVNjaGVtYTogW1xuICAgICAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnZ3NpSGFzaEtleTQnLCBLZXlUeXBlOiAnSEFTSCcgfSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIFByb2plY3Rpb246IHsgUHJvamVjdGlvblR5cGU6ICdBTEwnIH0sXG4gICAgICAgICAgICAgICAgUHJvdmlzaW9uZWRUaHJvdWdocHV0OiB7IFJlYWRDYXBhY2l0eVVuaXRzOiA1LCBXcml0ZUNhcGFjaXR5VW5pdHM6IDUgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGVzdC5kb25lKCk7XG4gIH0sXG5cbiAgJ2Vycm9yIHdoZW4gYWRkaW5nIG1vcmUgdGhhbiA1IGdsb2JhbCBzZWNvbmRhcnkgaW5kZXhlcycodGVzdDogVGVzdCkge1xuICAgIGNvbnN0IGFwcCA9IG5ldyBUZXN0QXBwKCk7XG4gICAgY29uc3QgdGFibGUgPSBuZXcgVGFibGUoYXBwLnN0YWNrLCBDT05TVFJVQ1RfTkFNRSlcbiAgICAgIC5hZGRQYXJ0aXRpb25LZXkoVEFCTEVfUEFSVElUSU9OX0tFWSlcbiAgICAgIC5hZGRTb3J0S2V5KFRBQkxFX1NPUlRfS0VZKTtcbiAgICBjb25zdCBnc2lHZW5lcmF0b3IgPSBHU0lfR0VORVJBVE9SKCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1OyBpKyspIHtcbiAgICAgIHRhYmxlLmFkZEdsb2JhbFNlY29uZGFyeUluZGV4KGdzaUdlbmVyYXRvci5uZXh0KCkudmFsdWUpO1xuICAgIH1cblxuICAgIHRlc3QudGhyb3dzKCgpID0+IHRhYmxlLmFkZEdsb2JhbFNlY29uZGFyeUluZGV4KGdzaUdlbmVyYXRvci5uZXh0KCkudmFsdWUpLFxuICAgICAgL2EgbWF4aW11bSBudW1iZXIgb2YgZ2xvYmFsIHNlY29uZGFyeSBpbmRleCBwZXIgdGFibGUgaXMgNS8pO1xuXG4gICAgdGVzdC5kb25lKCk7XG4gIH0sXG5cbiAgJ3doZW4gYWRkaW5nIGEgZ2xvYmFsIHNlY29uZGFyeSBpbmRleCB3aXRob3V0IHNwZWNpZnlpbmcgcmVhZCBhbmQgd3JpdGUgY2FwYWNpdHknKHRlc3Q6IFRlc3QpIHtcbiAgICBjb25zdCBhcHAgPSBuZXcgVGVzdEFwcCgpO1xuICAgIG5ldyBUYWJsZShhcHAuc3RhY2ssIENPTlNUUlVDVF9OQU1FKVxuICAgICAgLmFkZFBhcnRpdGlvbktleShUQUJMRV9QQVJUSVRJT05fS0VZKVxuICAgICAgLmFkZFNvcnRLZXkoVEFCTEVfU09SVF9LRVkpXG4gICAgICAuYWRkR2xvYmFsU2Vjb25kYXJ5SW5kZXgoe1xuICAgICAgICBpbmRleE5hbWU6IEdTSV9OQU1FLFxuICAgICAgICBwYXJ0aXRpb25LZXk6IEdTSV9QQVJUSVRJT05fS0VZLFxuICAgICAgfSk7XG4gICAgY29uc3QgdGVtcGxhdGUgPSBhcHAuc3ludGhlc2l6ZVRlbXBsYXRlKCk7XG5cbiAgICB0ZXN0LmRlZXBFcXVhbCh0ZW1wbGF0ZSwge1xuICAgICAgUmVzb3VyY2VzOiB7XG4gICAgICAgIE15VGFibGU3OTRFREVEMToge1xuICAgICAgICAgIFR5cGU6ICdBV1M6OkR5bmFtb0RCOjpUYWJsZScsXG4gICAgICAgICAgUHJvcGVydGllczoge1xuICAgICAgICAgICAgQXR0cmlidXRlRGVmaW5pdGlvbnM6IFtcbiAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnaGFzaEtleScsIEF0dHJpYnV0ZVR5cGU6ICdTJyB9LFxuICAgICAgICAgICAgICB7IEF0dHJpYnV0ZU5hbWU6ICdzb3J0S2V5JywgQXR0cmlidXRlVHlwZTogJ04nIH0sXG4gICAgICAgICAgICAgIHsgQXR0cmlidXRlTmFtZTogJ2dzaUhhc2hLZXknLCBBdHRyaWJ1dGVUeXBlOiAnUycgfVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIEtleVNjaGVtYTogW1xuICAgICAgICAgICAgICB7IEF0dHJpYnV0ZU5hbWU6ICdoYXNoS2V5JywgS2V5VHlwZTogJ0hBU0gnIH0sXG4gICAgICAgICAgICAgIHsgQXR0cmlidXRlTmFtZTogJ3NvcnRLZXknLCBLZXlUeXBlOiAnUkFOR0UnIH1cbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBQcm92aXNpb25lZFRocm91Z2hwdXQ6IHsgUmVhZENhcGFjaXR5VW5pdHM6IDUsIFdyaXRlQ2FwYWNpdHlVbml0czogNSB9LFxuICAgICAgICAgICAgR2xvYmFsU2Vjb25kYXJ5SW5kZXhlczogW1xuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgSW5kZXhOYW1lOiAnTXlHU0knLFxuICAgICAgICAgICAgICAgIEtleVNjaGVtYTogW1xuICAgICAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnZ3NpSGFzaEtleScsIEtleVR5cGU6ICdIQVNIJyB9LFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgUHJvamVjdGlvbjogeyBQcm9qZWN0aW9uVHlwZTogJ0FMTCcgfSxcbiAgICAgICAgICAgICAgICBQcm92aXNpb25lZFRocm91Z2hwdXQ6IHsgUmVhZENhcGFjaXR5VW5pdHM6IDUsIFdyaXRlQ2FwYWNpdHlVbml0czogNSB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRlc3QuZG9uZSgpO1xuICB9LFxuXG4gICd3aGVuIGFkZGluZyBhIGxvY2FsIHNlY29uZGFyeSBpbmRleCB3aXRoIGhhc2ggKyByYW5nZSBrZXknKHRlc3Q6IFRlc3QpIHtcbiAgICBjb25zdCBhcHAgPSBuZXcgVGVzdEFwcCgpO1xuICAgIG5ldyBUYWJsZShhcHAuc3RhY2ssIENPTlNUUlVDVF9OQU1FKVxuICAgICAgLmFkZFBhcnRpdGlvbktleShUQUJMRV9QQVJUSVRJT05fS0VZKVxuICAgICAgLmFkZFNvcnRLZXkoVEFCTEVfU09SVF9LRVkpXG4gICAgICAuYWRkTG9jYWxTZWNvbmRhcnlJbmRleCh7XG4gICAgICAgIGluZGV4TmFtZTogTFNJX05BTUUsXG4gICAgICAgIHNvcnRLZXk6IExTSV9TT1JUX0tFWSxcbiAgICAgIH0pO1xuICAgIGNvbnN0IHRlbXBsYXRlID0gYXBwLnN5bnRoZXNpemVUZW1wbGF0ZSgpO1xuXG4gICAgdGVzdC5kZWVwRXF1YWwodGVtcGxhdGUsIHtcbiAgICAgIFJlc291cmNlczoge1xuICAgICAgICBNeVRhYmxlNzk0RURFRDE6IHtcbiAgICAgICAgICBUeXBlOiAnQVdTOjpEeW5hbW9EQjo6VGFibGUnLFxuICAgICAgICAgIFByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgIEF0dHJpYnV0ZURlZmluaXRpb25zOiBbXG4gICAgICAgICAgICAgIHsgQXR0cmlidXRlTmFtZTogJ2hhc2hLZXknLCBBdHRyaWJ1dGVUeXBlOiAnUycgfSxcbiAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnc29ydEtleScsIEF0dHJpYnV0ZVR5cGU6ICdOJyB9LFxuICAgICAgICAgICAgICB7IEF0dHJpYnV0ZU5hbWU6ICdsc2lTb3J0S2V5JywgQXR0cmlidXRlVHlwZTogJ04nIH1cbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBLZXlTY2hlbWE6IFtcbiAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnaGFzaEtleScsIEtleVR5cGU6ICdIQVNIJyB9LFxuICAgICAgICAgICAgICB7IEF0dHJpYnV0ZU5hbWU6ICdzb3J0S2V5JywgS2V5VHlwZTogJ1JBTkdFJyB9XG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgUHJvdmlzaW9uZWRUaHJvdWdocHV0OiB7IFJlYWRDYXBhY2l0eVVuaXRzOiA1LCBXcml0ZUNhcGFjaXR5VW5pdHM6IDUgfSxcbiAgICAgICAgICAgIExvY2FsU2Vjb25kYXJ5SW5kZXhlczogW1xuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgSW5kZXhOYW1lOiAnTXlMU0knLFxuICAgICAgICAgICAgICAgIEtleVNjaGVtYTogW1xuICAgICAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnaGFzaEtleScsIEtleVR5cGU6ICdIQVNIJyB9LFxuICAgICAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnbHNpU29ydEtleScsIEtleVR5cGU6ICdSQU5HRScgfVxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgUHJvamVjdGlvbjogeyBQcm9qZWN0aW9uVHlwZTogJ0FMTCcgfSxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRlc3QuZG9uZSgpO1xuICB9LFxuXG4gICd3aGVuIGFkZGluZyBhIGxvY2FsIHNlY29uZGFyeSBpbmRleCB3aXRoIHByb2plY3Rpb24gdHlwZSBLRVlTX09OTFknKHRlc3Q6IFRlc3QpIHtcbiAgICBjb25zdCBhcHAgPSBuZXcgVGVzdEFwcCgpO1xuICAgIG5ldyBUYWJsZShhcHAuc3RhY2ssIENPTlNUUlVDVF9OQU1FKVxuICAgICAgLmFkZFBhcnRpdGlvbktleShUQUJMRV9QQVJUSVRJT05fS0VZKVxuICAgICAgLmFkZFNvcnRLZXkoVEFCTEVfU09SVF9LRVkpXG4gICAgICAuYWRkTG9jYWxTZWNvbmRhcnlJbmRleCh7XG4gICAgICAgIGluZGV4TmFtZTogTFNJX05BTUUsXG4gICAgICAgIHNvcnRLZXk6IExTSV9TT1JUX0tFWSxcbiAgICAgICAgcHJvamVjdGlvblR5cGU6IFByb2plY3Rpb25UeXBlLktleXNPbmx5XG4gICAgICB9KTtcbiAgICBjb25zdCB0ZW1wbGF0ZSA9IGFwcC5zeW50aGVzaXplVGVtcGxhdGUoKTtcblxuICAgIHRlc3QuZGVlcEVxdWFsKHRlbXBsYXRlLCB7XG4gICAgICBSZXNvdXJjZXM6IHtcbiAgICAgICAgTXlUYWJsZTc5NEVERUQxOiB7XG4gICAgICAgICAgVHlwZTogJ0FXUzo6RHluYW1vREI6OlRhYmxlJyxcbiAgICAgICAgICBQcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICBBdHRyaWJ1dGVEZWZpbml0aW9uczogW1xuICAgICAgICAgICAgICB7IEF0dHJpYnV0ZU5hbWU6ICdoYXNoS2V5JywgQXR0cmlidXRlVHlwZTogJ1MnIH0sXG4gICAgICAgICAgICAgIHsgQXR0cmlidXRlTmFtZTogJ3NvcnRLZXknLCBBdHRyaWJ1dGVUeXBlOiAnTicgfSxcbiAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnbHNpU29ydEtleScsIEF0dHJpYnV0ZVR5cGU6ICdOJyB9XG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgS2V5U2NoZW1hOiBbXG4gICAgICAgICAgICAgIHsgQXR0cmlidXRlTmFtZTogJ2hhc2hLZXknLCBLZXlUeXBlOiAnSEFTSCcgfSxcbiAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnc29ydEtleScsIEtleVR5cGU6ICdSQU5HRScgfVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIFByb3Zpc2lvbmVkVGhyb3VnaHB1dDogeyBSZWFkQ2FwYWNpdHlVbml0czogNSwgV3JpdGVDYXBhY2l0eVVuaXRzOiA1IH0sXG4gICAgICAgICAgICBMb2NhbFNlY29uZGFyeUluZGV4ZXM6IFtcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIEluZGV4TmFtZTogJ015TFNJJyxcbiAgICAgICAgICAgICAgICBLZXlTY2hlbWE6IFtcbiAgICAgICAgICAgICAgICAgIHsgQXR0cmlidXRlTmFtZTogJ2hhc2hLZXknLCBLZXlUeXBlOiAnSEFTSCcgfSxcbiAgICAgICAgICAgICAgICAgIHsgQXR0cmlidXRlTmFtZTogJ2xzaVNvcnRLZXknLCBLZXlUeXBlOiAnUkFOR0UnIH1cbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIFByb2plY3Rpb246IHsgUHJvamVjdGlvblR5cGU6ICdLRVlTX09OTFknIH0sXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0ZXN0LmRvbmUoKTtcbiAgfSxcblxuICAnd2hlbiBhZGRpbmcgYSBsb2NhbCBzZWNvbmRhcnkgaW5kZXggd2l0aCBwcm9qZWN0aW9uIHR5cGUgSU5DTFVERScodGVzdDogVGVzdCkge1xuICAgIGNvbnN0IGFwcCA9IG5ldyBUZXN0QXBwKCk7XG4gICAgY29uc3QgdGFibGUgPSBuZXcgVGFibGUoYXBwLnN0YWNrLCBDT05TVFJVQ1RfTkFNRSlcbiAgICAgIC5hZGRQYXJ0aXRpb25LZXkoVEFCTEVfUEFSVElUSU9OX0tFWSlcbiAgICAgIC5hZGRTb3J0S2V5KFRBQkxFX1NPUlRfS0VZKTtcbiAgICBjb25zdCBsc2lOb25LZXlBdHRyaWJ1dGVHZW5lcmF0b3IgPSBOT05fS0VZX0FUVFJJQlVURV9HRU5FUkFUT1IoTFNJX05PTl9LRVkpO1xuICAgIHRhYmxlLmFkZExvY2FsU2Vjb25kYXJ5SW5kZXgoe1xuICAgICAgaW5kZXhOYW1lOiBMU0lfTkFNRSxcbiAgICAgIHNvcnRLZXk6IExTSV9TT1JUX0tFWSxcbiAgICAgIHByb2plY3Rpb25UeXBlOiBQcm9qZWN0aW9uVHlwZS5JbmNsdWRlLFxuICAgICAgbm9uS2V5QXR0cmlidXRlczogWyBsc2lOb25LZXlBdHRyaWJ1dGVHZW5lcmF0b3IubmV4dCgpLnZhbHVlLCBsc2lOb25LZXlBdHRyaWJ1dGVHZW5lcmF0b3IubmV4dCgpLnZhbHVlIF1cbiAgICB9KTtcblxuICAgIGNvbnN0IHRlbXBsYXRlID0gYXBwLnN5bnRoZXNpemVUZW1wbGF0ZSgpO1xuXG4gICAgdGVzdC5kZWVwRXF1YWwodGVtcGxhdGUsIHtcbiAgICAgIFJlc291cmNlczoge1xuICAgICAgICBNeVRhYmxlNzk0RURFRDE6IHtcbiAgICAgICAgICBUeXBlOiAnQVdTOjpEeW5hbW9EQjo6VGFibGUnLFxuICAgICAgICAgIFByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgIEF0dHJpYnV0ZURlZmluaXRpb25zOiBbXG4gICAgICAgICAgICAgIHsgQXR0cmlidXRlTmFtZTogJ2hhc2hLZXknLCBBdHRyaWJ1dGVUeXBlOiAnUycgfSxcbiAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnc29ydEtleScsIEF0dHJpYnV0ZVR5cGU6ICdOJyB9LFxuICAgICAgICAgICAgICB7IEF0dHJpYnV0ZU5hbWU6ICdsc2lTb3J0S2V5JywgQXR0cmlidXRlVHlwZTogJ04nIH1cbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBLZXlTY2hlbWE6IFtcbiAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnaGFzaEtleScsIEtleVR5cGU6ICdIQVNIJyB9LFxuICAgICAgICAgICAgICB7IEF0dHJpYnV0ZU5hbWU6ICdzb3J0S2V5JywgS2V5VHlwZTogJ1JBTkdFJyB9XG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgUHJvdmlzaW9uZWRUaHJvdWdocHV0OiB7IFJlYWRDYXBhY2l0eVVuaXRzOiA1LCBXcml0ZUNhcGFjaXR5VW5pdHM6IDUgfSxcbiAgICAgICAgICAgIExvY2FsU2Vjb25kYXJ5SW5kZXhlczogW1xuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgSW5kZXhOYW1lOiAnTXlMU0knLFxuICAgICAgICAgICAgICAgIEtleVNjaGVtYTogW1xuICAgICAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnaGFzaEtleScsIEtleVR5cGU6ICdIQVNIJyB9LFxuICAgICAgICAgICAgICAgICAgeyBBdHRyaWJ1dGVOYW1lOiAnbHNpU29ydEtleScsIEtleVR5cGU6ICdSQU5HRScgfVxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgUHJvamVjdGlvbjogeyBOb25LZXlBdHRyaWJ1dGVzOiBbJ2xzaU5vbktleTAnLCAnbHNpTm9uS2V5MSddLCBQcm9qZWN0aW9uVHlwZTogJ0lOQ0xVREUnIH0sXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0ZXN0LmRvbmUoKTtcbiAgfSxcblxuICAnZXJyb3Igd2hlbiBhZGRpbmcgbW9yZSB0aGFuIDUgbG9jYWwgc2Vjb25kYXJ5IGluZGV4ZXMnKHRlc3Q6IFRlc3QpIHtcbiAgICBjb25zdCBhcHAgPSBuZXcgVGVzdEFwcCgpO1xuICAgIGNvbnN0IHRhYmxlID0gbmV3IFRhYmxlKGFwcC5zdGFjaywgQ09OU1RSVUNUX05BTUUpXG4gICAgICAuYWRkUGFydGl0aW9uS2V5KFRBQkxFX1BBUlRJVElPTl9LRVkpXG4gICAgICAuYWRkU29ydEtleShUQUJMRV9TT1JUX0tFWSk7XG4gICAgY29uc3QgbHNpR2VuZXJhdG9yID0gTFNJX0dFTkVSQVRPUigpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKSB7XG4gICAgICB0YWJsZS5hZGRMb2NhbFNlY29uZGFyeUluZGV4KGxzaUdlbmVyYXRvci5uZXh0KCkudmFsdWUpO1xuICAgIH1cblxuICAgIHRlc3QudGhyb3dzKCgpID0+IHRhYmxlLmFkZExvY2FsU2Vjb25kYXJ5SW5kZXgobHNpR2VuZXJhdG9yLm5leHQoKS52YWx1ZSksXG4gICAgICAvYSBtYXhpbXVtIG51bWJlciBvZiBsb2NhbCBzZWNvbmRhcnkgaW5kZXggcGVyIHRhYmxlIGlzIDUvKTtcblxuICAgIHRlc3QuZG9uZSgpO1xuICB9LFxuXG4gICdlcnJvciB3aGVuIGFkZGluZyBhIGxvY2FsIHNlY29uZGFyeSBpbmRleCBiZWZvcmUgc3BlY2lmeWluZyBhIHBhcnRpdGlvbiBrZXkgb2YgdGhlIHRhYmxlJyh0ZXN0OiBUZXN0KSB7XG4gICAgY29uc3QgYXBwID0gbmV3IFRlc3RBcHAoKTtcbiAgICBjb25zdCB0YWJsZSA9IG5ldyBUYWJsZShhcHAuc3RhY2ssIENPTlNUUlVDVF9OQU1FKVxuICAgICAgLmFkZFNvcnRLZXkoVEFCTEVfU09SVF9LRVkpO1xuXG4gICAgdGVzdC50aHJvd3MoKCkgPT4gdGFibGUuYWRkTG9jYWxTZWNvbmRhcnlJbmRleCh7XG4gICAgICBpbmRleE5hbWU6IExTSV9OQU1FLFxuICAgICAgc29ydEtleTogTFNJX1NPUlRfS0VZXG4gICAgfSksIC9hIHBhcnRpdGlvbiBrZXkgb2YgdGhlIHRhYmxlIG11c3QgYmUgc3BlY2lmaWVkIGZpcnN0IHRocm91Z2ggYWRkUGFydGl0aW9uS2V5KCkvKTtcblxuICAgIHRlc3QuZG9uZSgpO1xuICB9LFxuXG4gICdlcnJvciB3aGVuIGFkZGluZyBhIGxvY2FsIHNlY29uZGFyeSBpbmRleCB3aXRoIHRoZSBuYW1lIG9mIGEgZ2xvYmFsIHNlY29uZGFyeSBpbmRleCcodGVzdDogVGVzdCkge1xuICAgIGNvbnN0IGFwcCA9IG5ldyBUZXN0QXBwKCk7XG4gICAgY29uc3QgdGFibGUgPSBuZXcgVGFibGUoYXBwLnN0YWNrLCBDT05TVFJVQ1RfTkFNRSlcbiAgICAgIC5hZGRQYXJ0aXRpb25LZXkoVEFCTEVfUEFSVElUSU9OX0tFWSlcbiAgICAgIC5hZGRTb3J0S2V5KFRBQkxFX1NPUlRfS0VZKTtcbiAgICB0YWJsZS5hZGRHbG9iYWxTZWNvbmRhcnlJbmRleCh7XG4gICAgICBpbmRleE5hbWU6ICdTZWNvbmRhcnlJbmRleCcsXG4gICAgICBwYXJ0aXRpb25LZXk6IEdTSV9QQVJUSVRJT05fS0VZXG4gICAgfSk7XG5cbiAgICB0ZXN0LnRocm93cygoKSA9PiB0YWJsZS5hZGRMb2NhbFNlY29uZGFyeUluZGV4KHtcbiAgICAgIGluZGV4TmFtZTogJ1NlY29uZGFyeUluZGV4JyxcbiAgICAgIHNvcnRLZXk6IExTSV9TT1JUX0tFWVxuICAgIH0pLCAvYSBkdXBsaWNhdGUgaW5kZXggbmFtZSwgU2Vjb25kYXJ5SW5kZXgsIGlzIG5vdCBhbGxvd2VkLyk7XG5cbiAgICB0ZXN0LmRvbmUoKTtcbiAgfSxcblxuICAnZXJyb3Igd2hlbiB2YWxpZGF0aW5nIGNvbnN0cnVjdCBpZiBhIGxvY2FsIHNlY29uZGFyeSBpbmRleCBleGlzdHMgd2l0aG91dCBhIHNvcnQga2V5IG9mIHRoZSB0YWJsZScodGVzdDogVGVzdCkge1xuICAgIGNvbnN0IGFwcCA9IG5ldyBUZXN0QXBwKCk7XG4gICAgY29uc3QgdGFibGUgPSBuZXcgVGFibGUoYXBwLnN0YWNrLCBDT05TVFJVQ1RfTkFNRSlcbiAgICAgIC5hZGRQYXJ0aXRpb25LZXkoVEFCTEVfUEFSVElUSU9OX0tFWSk7XG4gICAgdGFibGUuYWRkTG9jYWxTZWNvbmRhcnlJbmRleCh7XG4gICAgICBpbmRleE5hbWU6IExTSV9OQU1FLFxuICAgICAgc29ydEtleTogTFNJX1NPUlRfS0VZXG4gICAgfSk7XG5cbiAgICBjb25zdCBlcnJvcnMgPSB0YWJsZS52YWxpZGF0ZSgpO1xuXG4gICAgdGVzdC5zdHJpY3RFcXVhbCgxLCBlcnJvcnMubGVuZ3RoKTtcbiAgICB0ZXN0LnN0cmljdEVxdWFsKCdhIHNvcnQga2V5IG9mIHRoZSB0YWJsZSBtdXN0IGJlIHNwZWNpZmllZCB0byBhZGQgbG9jYWwgc2Vjb25kYXJ5IGluZGV4ZXMnLCBlcnJvcnNbMF0pO1xuXG4gICAgdGVzdC5kb25lKCk7XG4gIH0sXG5cbiAgJ2NhbiBlbmFibGUgUmVhZCBBdXRvU2NhbGluZycodGVzdDogVGVzdCkge1xuICAgIC8vIEdJVkVOXG4gICAgY29uc3QgYXBwID0gbmV3IFRlc3RBcHAoKTtcbiAgICBjb25zdCB0YWJsZSA9IG5ldyBUYWJsZShhcHAuc3RhY2ssIENPTlNUUlVDVF9OQU1FLCB7IHJlYWRDYXBhY2l0eTogNDIsIHdyaXRlQ2FwYWNpdHk6IDEzMzcgfSk7XG4gICAgdGFibGUuYWRkUGFydGl0aW9uS2V5KFRBQkxFX1BBUlRJVElPTl9LRVkpO1xuXG4gICAgLy8gV0hFTlxuICAgIHRhYmxlLmF1dG9TY2FsZVJlYWRDYXBhY2l0eSh7IG1pbkNhcGFjaXR5OiA1MCwgbWF4Q2FwYWNpdHk6IDUwMCB9KS5zY2FsZU9uVXRpbGl6YXRpb24oeyB0YXJnZXRVdGlsaXphdGlvblBlcmNlbnQ6IDc1IH0pO1xuXG4gICAgLy8gVEhFTlxuICAgIGV4cGVjdChhcHAuc3RhY2spLnRvKGhhdmVSZXNvdXJjZSgnQVdTOjpBcHBsaWNhdGlvbkF1dG9TY2FsaW5nOjpTY2FsYWJsZVRhcmdldCcsIHtcbiAgICAgIE1heENhcGFjaXR5OiA1MDAsXG4gICAgICBNaW5DYXBhY2l0eTogNTAsXG4gICAgICBTY2FsYWJsZURpbWVuc2lvbjogJ2R5bmFtb2RiOnRhYmxlOlJlYWRDYXBhY2l0eVVuaXRzJyxcbiAgICAgIFNlcnZpY2VOYW1lc3BhY2U6ICdkeW5hbW9kYidcbiAgICB9KSk7XG4gICAgZXhwZWN0KGFwcC5zdGFjaykudG8oaGF2ZVJlc291cmNlKCdBV1M6OkFwcGxpY2F0aW9uQXV0b1NjYWxpbmc6OlNjYWxpbmdQb2xpY3knLCB7XG4gICAgICBQb2xpY3lUeXBlOiAnVGFyZ2V0VHJhY2tpbmdTY2FsaW5nJyxcbiAgICAgIFRhcmdldFRyYWNraW5nU2NhbGluZ1BvbGljeUNvbmZpZ3VyYXRpb246IHtcbiAgICAgICAgUHJlZGVmaW5lZE1ldHJpY1NwZWNpZmljYXRpb246IHsgUHJlZGVmaW5lZE1ldHJpY1R5cGU6ICdEeW5hbW9EQlJlYWRDYXBhY2l0eVV0aWxpemF0aW9uJyB9LFxuICAgICAgICBUYXJnZXRWYWx1ZTogNzVcbiAgICAgIH1cbiAgICB9KSk7XG5cbiAgICB0ZXN0LmRvbmUoKTtcbiAgfSxcblxuICAnY2FuIGVuYWJsZSBXcml0ZSBBdXRvU2NhbGluZycodGVzdDogVGVzdCkge1xuICAgIC8vIEdJVkVOXG4gICAgY29uc3QgYXBwID0gbmV3IFRlc3RBcHAoKTtcbiAgICBjb25zdCB0YWJsZSA9IG5ldyBUYWJsZShhcHAuc3RhY2ssIENPTlNUUlVDVF9OQU1FLCB7IHJlYWRDYXBhY2l0eTogNDIsIHdyaXRlQ2FwYWNpdHk6IDEzMzcgfSk7XG4gICAgdGFibGUuYWRkUGFydGl0aW9uS2V5KFRBQkxFX1BBUlRJVElPTl9LRVkpO1xuXG4gICAgLy8gV0hFTlxuICAgIHRhYmxlLmF1dG9TY2FsZVdyaXRlQ2FwYWNpdHkoeyBtaW5DYXBhY2l0eTogNTAsIG1heENhcGFjaXR5OiA1MDAgfSkuc2NhbGVPblV0aWxpemF0aW9uKHsgdGFyZ2V0VXRpbGl6YXRpb25QZXJjZW50OiA3NSB9KTtcblxuICAgIC8vIFRIRU5cbiAgICBleHBlY3QoYXBwLnN0YWNrKS50byhoYXZlUmVzb3VyY2UoJ0FXUzo6QXBwbGljYXRpb25BdXRvU2NhbGluZzo6U2NhbGFibGVUYXJnZXQnLCB7XG4gICAgICBNYXhDYXBhY2l0eTogNTAwLFxuICAgICAgTWluQ2FwYWNpdHk6IDUwLFxuICAgICAgU2NhbGFibGVEaW1lbnNpb246ICdkeW5hbW9kYjp0YWJsZTpXcml0ZUNhcGFjaXR5VW5pdHMnLFxuICAgICAgU2VydmljZU5hbWVzcGFjZTogJ2R5bmFtb2RiJ1xuICAgIH0pKTtcbiAgICBleHBlY3QoYXBwLnN0YWNrKS50byhoYXZlUmVzb3VyY2UoJ0FXUzo6QXBwbGljYXRpb25BdXRvU2NhbGluZzo6U2NhbGluZ1BvbGljeScsIHtcbiAgICAgIFBvbGljeVR5cGU6ICdUYXJnZXRUcmFja2luZ1NjYWxpbmcnLFxuICAgICAgVGFyZ2V0VHJhY2tpbmdTY2FsaW5nUG9saWN5Q29uZmlndXJhdGlvbjoge1xuICAgICAgICBQcmVkZWZpbmVkTWV0cmljU3BlY2lmaWNhdGlvbjogeyBQcmVkZWZpbmVkTWV0cmljVHlwZTogJ0R5bmFtb0RCV3JpdGVDYXBhY2l0eVV0aWxpemF0aW9uJyB9LFxuICAgICAgICBUYXJnZXRWYWx1ZTogNzVcbiAgICAgIH1cbiAgICB9KSk7XG5cbiAgICB0ZXN0LmRvbmUoKTtcbiAgfSxcblxuICAnY2Fubm90IGVuYWJsZSBBdXRvU2NhbGluZyB0d2ljZSBvbiB0aGUgc2FtZSBwcm9wZXJ0eScodGVzdDogVGVzdCkge1xuICAgIC8vIEdJVkVOXG4gICAgY29uc3QgYXBwID0gbmV3IFRlc3RBcHAoKTtcbiAgICBjb25zdCB0YWJsZSA9IG5ldyBUYWJsZShhcHAuc3RhY2ssIENPTlNUUlVDVF9OQU1FLCB7IHJlYWRDYXBhY2l0eTogNDIsIHdyaXRlQ2FwYWNpdHk6IDEzMzcgfSk7XG4gICAgdGFibGUuYWRkUGFydGl0aW9uS2V5KFRBQkxFX1BBUlRJVElPTl9LRVkpO1xuICAgIHRhYmxlLmF1dG9TY2FsZVJlYWRDYXBhY2l0eSh7IG1pbkNhcGFjaXR5OiA1MCwgbWF4Q2FwYWNpdHk6IDUwMCB9KS5zY2FsZU9uVXRpbGl6YXRpb24oeyB0YXJnZXRVdGlsaXphdGlvblBlcmNlbnQ6IDc1IH0pO1xuXG4gICAgLy8gV0hFTlxuICAgIHRlc3QudGhyb3dzKCgpID0+IHtcbiAgICAgIHRhYmxlLmF1dG9TY2FsZVJlYWRDYXBhY2l0eSh7IG1pbkNhcGFjaXR5OiA1MCwgbWF4Q2FwYWNpdHk6IDUwMCB9KTtcbiAgICB9KTtcblxuICAgIHRlc3QuZG9uZSgpO1xuICB9LFxuXG4gICdlcnJvciB3aGVuIGVuYWJsaW5nIEF1dG9TY2FsaW5nIG9uIHRoZSBQQVlfUEVSX1JFUVVFU1QgdGFibGUnKHRlc3Q6IFRlc3QpIHtcbiAgICAvLyBHSVZFTlxuICAgIGNvbnN0IGFwcCA9IG5ldyBUZXN0QXBwKCk7XG4gICAgY29uc3QgdGFibGUgPSBuZXcgVGFibGUoYXBwLnN0YWNrLCBDT05TVFJVQ1RfTkFNRSwgeyBiaWxsaW5nTW9kZTogQmlsbGluZ01vZGUuUGF5UGVyUmVxdWVzdCB9KTtcbiAgICB0YWJsZS5hZGRQYXJ0aXRpb25LZXkoVEFCTEVfUEFSVElUSU9OX0tFWSk7XG4gICAgdGFibGUuYWRkR2xvYmFsU2Vjb25kYXJ5SW5kZXgoe1xuICAgICAgaW5kZXhOYW1lOiBHU0lfTkFNRSxcbiAgICAgIHBhcnRpdGlvbktleTogR1NJX1BBUlRJVElPTl9LRVlcbiAgICB9KTtcblxuICAgIC8vIFdIRU5cbiAgICB0ZXN0LnRocm93cygoKSA9PiB7XG4gICAgICB0YWJsZS5hdXRvU2NhbGVSZWFkQ2FwYWNpdHkoeyBtaW5DYXBhY2l0eTogNTAsIG1heENhcGFjaXR5OiA1MDAgfSk7XG4gICAgfSk7XG4gICAgdGVzdC50aHJvd3MoKCkgPT4ge1xuICAgICAgdGFibGUuYXV0b1NjYWxlV3JpdGVDYXBhY2l0eSh7IG1pbkNhcGFjaXR5OiA1MCwgbWF4Q2FwYWNpdHk6IDUwMCB9KTtcbiAgICB9KTtcbiAgICB0ZXN0LnRocm93cygoKSA9PiB0YWJsZS5hdXRvU2NhbGVHbG9iYWxTZWNvbmRhcnlJbmRleFJlYWRDYXBhY2l0eShHU0lfTkFNRSwge1xuICAgICAgbWluQ2FwYWNpdHk6IDEsXG4gICAgICBtYXhDYXBhY2l0eTogNVxuICAgIH0pKTtcblxuICAgIHRlc3QuZG9uZSgpO1xuICB9LFxuXG4gICdlcnJvciB3aGVuIHNwZWNpZnlpbmcgUmVhZCBBdXRvIFNjYWxpbmcgd2l0aCBpbnZhbGlkIHNjYWxpbmdUYXJnZXRWYWx1ZSA8IDEwJyh0ZXN0OiBUZXN0KSB7XG4gICAgLy8gR0lWRU5cbiAgICBjb25zdCBhcHAgPSBuZXcgVGVzdEFwcCgpO1xuICAgIGNvbnN0IHRhYmxlID0gbmV3IFRhYmxlKGFwcC5zdGFjaywgQ09OU1RSVUNUX05BTUUsIHsgcmVhZENhcGFjaXR5OiA0Miwgd3JpdGVDYXBhY2l0eTogMTMzNyB9KTtcblxuICAgIC8vIFRIRU5cbiAgICB0ZXN0LnRocm93cygoKSA9PiB7XG4gICAgICB0YWJsZS5hdXRvU2NhbGVSZWFkQ2FwYWNpdHkoeyBtaW5DYXBhY2l0eTogNTAsIG1heENhcGFjaXR5OiA1MDAgfSkuc2NhbGVPblV0aWxpemF0aW9uKHsgdGFyZ2V0VXRpbGl6YXRpb25QZXJjZW50OiA1IH0pO1xuICAgIH0pO1xuXG4gICAgdGVzdC5kb25lKCk7XG4gIH0sXG5cbiAgJ2Vycm9yIHdoZW4gc3BlY2lmeWluZyBSZWFkIEF1dG8gU2NhbGluZyB3aXRoIGludmFsaWQgbWluaW11bUNhcGFjaXR5Jyh0ZXN0OiBUZXN0KSB7XG4gICAgLy8gR0lWRU5cbiAgICBjb25zdCBhcHAgPSBuZXcgVGVzdEFwcCgpO1xuICAgIGNvbnN0IHRhYmxlID0gbmV3IFRhYmxlKGFwcC5zdGFjaywgQ09OU1RSVUNUX05BTUUsIHsgcmVhZENhcGFjaXR5OiA0Miwgd3JpdGVDYXBhY2l0eTogMTMzNyB9KTtcblxuICAgIC8vIFRIRU5cbiAgICB0ZXN0LnRocm93cygoKSA9PiB0YWJsZS5hdXRvU2NhbGVSZWFkQ2FwYWNpdHkoeyBtaW5DYXBhY2l0eTogMTAsIG1heENhcGFjaXR5OiA1IH0pKTtcblxuICAgIHRlc3QuZG9uZSgpO1xuICB9LFxuXG4gICdjYW4gYXV0b3NjYWxlIG9uIGEgc2NoZWR1bGUnKHRlc3Q6IFRlc3QpIHtcbiAgICAvLyBHSVZFTlxuICAgIGNvbnN0IGFwcCA9IG5ldyBUZXN0QXBwKCk7XG4gICAgY29uc3QgdGFibGUgPSBuZXcgVGFibGUoYXBwLnN0YWNrLCBDT05TVFJVQ1RfTkFNRSwgeyByZWFkQ2FwYWNpdHk6IDQyLCB3cml0ZUNhcGFjaXR5OiAxMzM3IH0pO1xuICAgIHRhYmxlLmFkZFBhcnRpdGlvbktleSh7IG5hbWU6ICdIYXNoJywgdHlwZTogQXR0cmlidXRlVHlwZS5TdHJpbmcgfSk7XG5cbiAgICAvLyBXSEVOXG4gICAgY29uc3Qgc2NhbGluZyA9IHRhYmxlLmF1dG9TY2FsZVJlYWRDYXBhY2l0eSh7IG1pbkNhcGFjaXR5OiAxLCBtYXhDYXBhY2l0eTogMTAwIH0pO1xuICAgIHNjYWxpbmcuc2NhbGVPblNjaGVkdWxlKCdTYXZlTW9uZXlCeU5vdFNjYWxpbmdVcCcsIHtcbiAgICAgIHNjaGVkdWxlOiAnY3JvbigqICogPyAqICogKScsXG4gICAgICBtYXhDYXBhY2l0eTogMTBcbiAgICB9KTtcblxuICAgIC8vIFRIRU5cbiAgICBleHBlY3QoYXBwLnN0YWNrKS50byhoYXZlUmVzb3VyY2UoJ0FXUzo6QXBwbGljYXRpb25BdXRvU2NhbGluZzo6U2NhbGFibGVUYXJnZXQnLCB7XG4gICAgICBTY2hlZHVsZWRBY3Rpb25zOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBTY2FsYWJsZVRhcmdldEFjdGlvbjogeyBcIk1heENhcGFjaXR5XCI6IDEwIH0sXG4gICAgICAgICAgU2NoZWR1bGU6IFwiY3JvbigqICogPyAqICogKVwiLFxuICAgICAgICAgIFNjaGVkdWxlZEFjdGlvbk5hbWU6IFwiU2F2ZU1vbmV5QnlOb3RTY2FsaW5nVXBcIlxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSkpO1xuXG4gICAgdGVzdC5kb25lKCk7XG4gIH0sXG5cbiAgJ2dyYW50cyc6IHtcblxuICAgICdcImdyYW50XCIgYWxsb3dzIGFkZGluZyBhcmJpdHJhcnkgYWN0aW9ucyBhc3NvY2lhdGVkIHdpdGggdGhpcyB0YWJsZSByZXNvdXJjZScodGVzdDogVGVzdCkge1xuICAgICAgdGVzdEdyYW50KHRlc3QsXG4gICAgICAgIFsgJ2FjdGlvbjEnLCAnYWN0aW9uMicgXSwgKHAsIHQpID0+IHQuZ3JhbnQocCwgJ2R5bmFtb2RiOmFjdGlvbjEnLCAnZHluYW1vZGI6YWN0aW9uMicpKTtcbiAgICB9LFxuXG4gICAgJ1wiZ3JhbnRSZWFkRGF0YVwiIGFsbG93cyB0aGUgcHJpbmNpcGFsIHRvIHJlYWQgZGF0YSBmcm9tIHRoZSB0YWJsZScodGVzdDogVGVzdCkge1xuICAgICAgdGVzdEdyYW50KHRlc3QsXG4gICAgICAgIFsgJ0JhdGNoR2V0SXRlbScsICdHZXRSZWNvcmRzJywgJ0dldFNoYXJkSXRlcmF0b3InLCAnUXVlcnknLCAnR2V0SXRlbScsICdTY2FuJyBdLCAocCwgdCkgPT4gdC5ncmFudFJlYWREYXRhKHApKTtcbiAgICB9LFxuXG4gICAgJ1wiZ3JhbnRXcml0ZURhdGFcIiBhbGxvd3MgdGhlIHByaW5jaXBhbCB0byB3cml0ZSBkYXRhIHRvIHRoZSB0YWJsZScodGVzdDogVGVzdCkge1xuICAgICAgdGVzdEdyYW50KHRlc3QsIFtcbiAgICAgICAgJ0JhdGNoV3JpdGVJdGVtJywgJ1B1dEl0ZW0nLCAnVXBkYXRlSXRlbScsICdEZWxldGVJdGVtJyBdLCAocCwgdCkgPT4gdC5ncmFudFdyaXRlRGF0YShwKSk7XG4gICAgfSxcblxuICAgICdcImdyYW50UmVhZFdyaXRlRGF0YVwiIGFsbG93cyB0aGUgcHJpbmNpcGFsIHRvIHJlYWQvd3JpdGUgZGF0YScodGVzdDogVGVzdCkge1xuICAgICAgdGVzdEdyYW50KHRlc3QsIFtcbiAgICAgICAgJ0JhdGNoR2V0SXRlbScsICdHZXRSZWNvcmRzJywgJ0dldFNoYXJkSXRlcmF0b3InLCAnUXVlcnknLCAnR2V0SXRlbScsICdTY2FuJyxcbiAgICAgICAgJ0JhdGNoV3JpdGVJdGVtJywgJ1B1dEl0ZW0nLCAnVXBkYXRlSXRlbScsICdEZWxldGVJdGVtJyBdLCAocCwgdCkgPT4gdC5ncmFudFJlYWRXcml0ZURhdGEocCkpO1xuICAgIH0sXG5cbiAgICAnXCJncmFudEZ1bGxBY2Nlc3NcIiBhbGxvd3MgdGhlIHByaW5jaXBhbCB0byBwZXJmb3JtIGFueSBhY3Rpb24gb24gdGhlIHRhYmxlIChcIipcIiknKHRlc3Q6IFRlc3QpIHtcbiAgICAgIHRlc3RHcmFudCh0ZXN0LCBbICcqJyBdLCAocCwgdCkgPT4gdC5ncmFudEZ1bGxBY2Nlc3MocCkpO1xuICAgIH1cbiAgfSxcbn07XG5cbmNsYXNzIFRlc3RBcHAge1xuICBwcml2YXRlIHJlYWRvbmx5IGFwcCA9IG5ldyBBcHAoKTtcbiAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1lbWJlci1vcmRlcmluZ1xuICBwdWJsaWMgcmVhZG9ubHkgc3RhY2s6IFN0YWNrID0gbmV3IFN0YWNrKHRoaXMuYXBwLCBTVEFDS19OQU1FKTtcblxuICBwdWJsaWMgc3ludGhlc2l6ZVRlbXBsYXRlKCkge1xuICAgIHJldHVybiB0aGlzLmFwcC5zeW50aGVzaXplU3RhY2sodGhpcy5zdGFjay5uYW1lKS50ZW1wbGF0ZTtcbiAgfVxufVxuXG5mdW5jdGlvbiB0ZXN0R3JhbnQodGVzdDogVGVzdCwgZXhwZWN0ZWRBY3Rpb25zOiBzdHJpbmdbXSwgaW52b2NhdGlvbjogKHVzZXI6IGlhbS5JUHJpbmNpcGFsLCB0YWJsZTogVGFibGUpID0+IHZvaWQpIHtcbiAgLy8gR0lWRU5cbiAgY29uc3Qgc3RhY2sgPSBuZXcgU3RhY2soKTtcblxuICBjb25zdCB0YWJsZSA9IG5ldyBUYWJsZShzdGFjaywgJ215LXRhYmxlJyk7XG4gIHRhYmxlLmFkZFBhcnRpdGlvbktleSh7IG5hbWU6ICdJRCcsIHR5cGU6ICBBdHRyaWJ1dGVUeXBlLlN0cmluZyB9KTtcblxuICBjb25zdCB1c2VyID0gbmV3IGlhbS5Vc2VyKHN0YWNrLCAndXNlcicpO1xuXG4gIC8vIFdIRU5cbiAgaW52b2NhdGlvbih1c2VyLCB0YWJsZSk7XG5cbiAgLy8gVEhFTlxuICBjb25zdCBhY3Rpb24gPSBleHBlY3RlZEFjdGlvbnMubGVuZ3RoID4gMSA/IGV4cGVjdGVkQWN0aW9ucy5tYXAoYSA9PiBgZHluYW1vZGI6JHthfWApIDogYGR5bmFtb2RiOiR7ZXhwZWN0ZWRBY3Rpb25zWzBdfWA7XG4gIGV4cGVjdChzdGFjaykudG8oaGF2ZVJlc291cmNlKCdBV1M6OklBTTo6UG9saWN5Jywge1xuICAgIFwiUG9saWN5RG9jdW1lbnRcIjoge1xuICAgICAgXCJTdGF0ZW1lbnRcIjogW1xuICAgICAgICB7XG4gICAgICAgICAgXCJBY3Rpb25cIjogYWN0aW9uLFxuICAgICAgICAgIFwiRWZmZWN0XCI6IFwiQWxsb3dcIixcbiAgICAgICAgICBcIlJlc291cmNlXCI6IHtcbiAgICAgICAgICAgIFwiRm46OkdldEF0dFwiOiBbXG4gICAgICAgICAgICAgIFwibXl0YWJsZTAzMjRENDVDXCIsXG4gICAgICAgICAgICAgIFwiQXJuXCJcbiAgICAgICAgICAgIF1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBcIlZlcnNpb25cIjogXCIyMDEyLTEwLTE3XCJcbiAgICB9LFxuICAgIFwiVXNlcnNcIjogWyB7IFwiUmVmXCI6IFwidXNlcjJDMkI1N0FFXCIgfSBdXG4gIH0pKTtcbiAgdGVzdC5kb25lKCk7XG59XG4iXX0=